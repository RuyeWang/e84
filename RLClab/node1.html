<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Filter design and testing</TITLE>
<META NAME="description" CONTENT="Filter design and testing">
<META NAME="keywords" CONTENT="RLClab">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="RLClab.css">

<LINK REL="next" HREF="node2.html">
<LINK REL="previous" HREF="RLClab.html">
<LINK REL="up" HREF="RLClab.html">
<LINK REL="next" HREF="node2.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html16"
  HREF="node2.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="file:/opt/local/share/lib/latex2html/icons/next.png"></A> 
<A NAME="tex2html14"
  HREF="RLClab.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/opt/local/share/lib/latex2html/icons/up.png"></A> 
<A NAME="tex2html8"
  HREF="RLClab.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/opt/local/share/lib/latex2html/icons/prev.png"></A>   
<BR>
<B> Next:</B> <A NAME="tex2html17"
  HREF="node2.html">About this document ...</A>
<B> Up:</B> <A NAME="tex2html15"
  HREF="RLClab.html">RLClab</A>
<B> Previous:</B> <A NAME="tex2html9"
  HREF="RLClab.html">RLClab</A>
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION00010000000000000000">
Filter design and testing</A>
</H1>

<P>
Read 
<A NAME="tex2html1"
  HREF="http://fourier.eng.hmc.edu/e84/lectures/ch3/node17.html">this page</A>
to make sure you are prepared before carrying out the lab.

<P>

<OL>
<LI>Consider the band-pass and band-stop filters shown below:

<P>
<IMG
 ALIGN="BOTTOM" BORDER="0" SRC="../../lectures/figures/LC_R.png"
 ALT="LC_R.png">

<P>
Do the following for each of the filters:
  
<UL>
<LI>Find the two cut-off frequencies <IMG
 WIDTH="24" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img1.png"
 ALT="$\omega_1$"> and <IMG
 WIDTH="24" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img2.png"
 ALT="$\omega_2$"> at which
    <!-- MATH
 $|H(\omega_{1,2})|=1/\sqrt{2}$
 -->
<IMG
 WIDTH="145" HEIGHT="43" ALIGN="MIDDLE" BORDER="0"
 SRC="img3.png"
 ALT="$\vert H(\omega_{1,2})\vert=1/\sqrt{2}$"> in terms of the three components <IMG
 WIDTH="19" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img4.png"
 ALT="$R$">, <IMG
 WIDTH="19" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img5.png"
 ALT="$C$">, 
    and <IMG
 WIDTH="17" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img6.png"
 ALT="$L$">:
</LI>
<LI>Find the bandwidth (of the passing or stop band)
    <!-- MATH
 $\Delta\omega=\omega_2-\omega_1$
 -->
<IMG
 WIDTH="119" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img7.png"
 ALT="$\Delta\omega=\omega_2-\omega_1$"> in terms of the three components <IMG
 WIDTH="19" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img4.png"
 ALT="$R$">, 
    <IMG
 WIDTH="19" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img5.png"
 ALT="$C$">, and <IMG
 WIDTH="17" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img6.png"
 ALT="$L$">.
</LI>
<LI>Generate the linear and Bode plots of <IMG
 WIDTH="59" HEIGHT="39" ALIGN="MIDDLE" BORDER="0"
 SRC="img8.png"
 ALT="$\vert H(\omega)\vert$"> (no need for the 
    phase plots) in Matlab.
</LI>
<LI>Implement the filter with the available compoents R, L and C in the 
    lab so that <!-- MATH
 $\omega_n\approx 6\;kHz$
 -->
<IMG
 WIDTH="102" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img9.png"
 ALT="$\omega_n\approx 6\;kHz$"> and <!-- MATH
 $\Delta\omega\approx 1\;kHz$
 -->
<IMG
 WIDTH="109" HEIGHT="20" ALIGN="BOTTOM" BORDER="0"
 SRC="img10.png"
 ALT="$\Delta\omega\approx 1\;kHz$">. 
</LI>
<LI>Generate the linear and Bode plots of <IMG
 WIDTH="59" HEIGHT="39" ALIGN="MIDDLE" BORDER="0"
 SRC="img8.png"
 ALT="$\vert H(\omega)\vert$"> of your circuit
    and compare with the simulation by Matlab. If there is any discrepancy,
    explain.
  
</LI>
</UL>

<P>
<B>Solution:</B> 

<P>

<UL>
<LI>The FRF of the first circuit is
  <BR><P></P>
<DIV ALIGN="CENTER">
<!-- MATH
 \begin{displaymath}
H_{LC}=\frac{Z_{LC}}{Z_{LC}+R}=\frac{\frac{j\omega L}{1-(\omega/\omega_n)^2}}{
    \frac{j\omega L}{1-(\omega/\omega_n)^2 } +R}
  =\frac{j\omega L}{j\omega L+R(1-(\omega/\omega_n)^2)}
  =\frac{1}{1-j\frac{(1-(\omega/\omega_n)^2)}{\omega L/R}}
\end{displaymath}
 -->

<IMG
 WIDTH="633" HEIGHT="66" BORDER="0"
 SRC="img11.png"
 ALT="\begin{displaymath}
H_{LC}=\frac{Z_{LC}}{Z_{LC}+R}=\frac{\frac{j\omega L}{1-(\o...
...2)}
=\frac{1}{1-j\frac{(1-(\omega/\omega_n)^2)}{\omega L/R}}
\end{displaymath}">
</DIV>
<BR CLEAR="ALL">
<P></P>
When <!-- MATH
 $\omega=\omega_n$
 -->
<IMG
 WIDTH="63" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img12.png"
 ALT="$\omega=\omega_n$">, <IMG
 WIDTH="82" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img13.png"
 ALT="$Z_{LC}=\infty$">, no current goes through 
  <IMG
 WIDTH="19" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img4.png"
 ALT="$R$"> and the voltage across it is zero the output voltage is the 
  same as the input voltage. Otherwise either <!-- MATH
 $\omega>\omega_n$
 -->
<IMG
 WIDTH="63" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img14.png"
 ALT="$\omega&gt;\omega_n$"> or 
  <!-- MATH
 $\omega<\omega_n$
 -->
<IMG
 WIDTH="63" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img15.png"
 ALT="$\omega&lt;\omega_n$">, <IMG
 WIDTH="38" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img16.png"
 ALT="$Z_{LC}$"> is finite, the voltage across <IMG
 WIDTH="19" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img4.png"
 ALT="$R$"> is 
  non-zero, the output voltage is reduced. This is a band-pass 
  filter:
  <BR><P></P>
<DIV ALIGN="CENTER">
<!-- MATH
 \begin{displaymath}
|H_{BP}|=\bigg|\frac{Z_C||Z_L}{R+Z_C||Z_L}\bigg|
  =\left\{\begin{array}{cc}0&\omega\rightarrow 0\\
  1&\omega=\omega_n\\0&\omega\rightarrow\infty\end{array}\right.
\end{displaymath}
 -->

<IMG
 WIDTH="313" HEIGHT="76" BORDER="0"
 SRC="img17.png"
 ALT="\begin{displaymath}
\vert H_{BP}\vert=\bigg\vert\frac{Z_C\vert\vert Z_L}{R+Z_C\...
...\omega=\omega_n 0&amp;\omega\rightarrow\infty\end{array}\right.
\end{displaymath}">
</DIV>
<BR CLEAR="ALL">
<P></P>

<P>
</LI>
<LI>The FRF of the second circuit is
  <BR><P></P>
<DIV ALIGN="CENTER">
<!-- MATH
 \begin{displaymath}
H_R=\frac{R}{Z_{LC}+R}=\frac{R}{\frac{j\omega L}{1-(\omega/\omega_n)^2}+R}
  =\frac{1}{\frac{j\omega L/R}{1-(\omega/\omega_n)^2 }+1}
\end{displaymath}
 -->

<IMG
 WIDTH="392" HEIGHT="58" BORDER="0"
 SRC="img18.png"
 ALT="\begin{displaymath}
H_R=\frac{R}{Z_{LC}+R}=\frac{R}{\frac{j\omega L}{1-(\omega/...
...}+R}
=\frac{1}{\frac{j\omega L/R}{1-(\omega/\omega_n)^2 }+1}
\end{displaymath}">
</DIV>
<BR CLEAR="ALL">
<P></P>
when <!-- MATH
 $\omega=\omega_n$
 -->
<IMG
 WIDTH="63" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img12.png"
 ALT="$\omega=\omega_n$">, <IMG
 WIDTH="82" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img13.png"
 ALT="$Z_{LC}=\infty$">, the LC parallel branch 
  is an open-circuit, the output voltage is zero. Otherwise either 
  <!-- MATH
 $\omega>\omega_n$
 -->
<IMG
 WIDTH="63" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img14.png"
 ALT="$\omega&gt;\omega_n$"> or <!-- MATH
 $\omega<\omega_n$
 -->
<IMG
 WIDTH="63" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img15.png"
 ALT="$\omega&lt;\omega_n$">, <IMG
 WIDTH="38" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img16.png"
 ALT="$Z_{LC}$"> is finite, the
  voltage is non-zero. The circuit is a band-stop or band-block 
  filter:
  <BR><P></P>
<DIV ALIGN="CENTER">
<!-- MATH
 \begin{displaymath}
|H_{BS}|=\bigg|\frac{R}{R+Z_C||Z_L}\bigg|
  =\left\{\begin{array}{cc}1&\omega\rightarrow 0\\
  0&\omega=\omega_n\\1&\omega\rightarrow\infty\end{array}\right.
\end{displaymath}
 -->

<IMG
 WIDTH="312" HEIGHT="76" BORDER="0"
 SRC="img19.png"
 ALT="\begin{displaymath}
\vert H_{BS}\vert=\bigg\vert\frac{R}{R+Z_C\vert\vert Z_L}\b...
...\omega=\omega_n 1&amp;\omega\rightarrow\infty\end{array}\right.
\end{displaymath}">
</DIV>
<BR CLEAR="ALL">
<P></P>

<P>
</LI>
</UL>
The bandwidth is defined as <!-- MATH
 $\Delta\omega=\omega_2-\omega_1$
 -->
<IMG
 WIDTH="119" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img7.png"
 ALT="$\Delta\omega=\omega_2-\omega_1$">, the
difference between the two cut-off frequencies <!-- MATH
 $\omega_1<\omega_n$
 -->
<IMG
 WIDTH="69" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img20.png"
 ALT="$\omega_1&lt;\omega_n$"> 
and <!-- MATH
 $\omega_2>\omega_n$
 -->
<IMG
 WIDTH="69" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img21.png"
 ALT="$\omega_2&gt;\omega_n$"> at which <!-- MATH
 $|H|=1/\sqrt{2}$
 -->
<IMG
 WIDTH="101" HEIGHT="43" ALIGN="MIDDLE" BORDER="0"
 SRC="img22.png"
 ALT="$\vert H\vert=1/\sqrt{2}$">. For both filters,
the cut-off frequencies can be found by solving
<BR><P></P>
<DIV ALIGN="CENTER">
<!-- MATH
 \begin{displaymath}
1-\left(\frac{\omega}{\omega_n}\right)^2 =\pm \frac{\omega L}{R}
\end{displaymath}
 -->

<IMG
 WIDTH="154" HEIGHT="50" BORDER="0"
 SRC="img23.png"
 ALT="\begin{displaymath}
1-\left(\frac{\omega}{\omega_n}\right)^2 =\pm \frac{\omega L}{R}
\end{displaymath}">
</DIV>
<BR CLEAR="ALL">
<P></P>
i.e., the two filters always have the same bandwidth.

<P>
<IMG
 ALIGN="BOTTOM" BORDER="0" SRC="../../figures/BpassBstop.png"
 ALT="BpassBstop.png">

<P>
Choose <IMG
 WIDTH="83" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img24.png"
 ALT="$C=1 \mu F$"> and <IMG
 WIDTH="88" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img25.png"
 ALT="$L=2 mH$"> so that 
  <!-- MATH
 $f_n=1/(2\pi\sqrt{LC})=6.016\,kHz$
 -->
<IMG
 WIDTH="253" HEIGHT="44" ALIGN="MIDDLE" BORDER="0"
 SRC="img26.png"
 ALT="$f_n=1/(2\pi\sqrt{LC})=6.016 kHz$">, choose <IMG
 WIDTH="86" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img27.png"
 ALT="$R=150\Omega$"> so that
  <!-- MATH
 $\Delta f=1/(2\pi RC)=1.06\,kHz$
 -->
<IMG
 WIDTH="238" HEIGHT="39" ALIGN="MIDDLE" BORDER="0"
 SRC="img28.png"
 ALT="$\Delta f=1/(2\pi RC)=1.06 kHz$">. 

<P>
</LI>
<LI>Design an RLC series band-pass (BP) filter with the available components 
  in the lab so that the passing band is centered around 7.5 kHz and bandwidth
  is about 1.3 kHz. Derive its frequency response function (FRF) <IMG
 WIDTH="48" HEIGHT="39" ALIGN="MIDDLE" BORDER="0"
 SRC="img29.png"
 ALT="$H(\omega)$">, 
  and use Matlab to generate a linear plot of its magnitude as a function of 
  frequency (up to 20 kHz), also make a Bode plot (from 0 to 100 kHz) using your
  own code. Feed 
  a sinusoidal signal <!-- MATH
 $x(t)=\cos(2\pi ft)$
 -->
<IMG
 WIDTH="140" HEIGHT="39" ALIGN="MIDDLE" BORDER="0"
 SRC="img30.png"
 ALT="$x(t)=\cos(2\pi ft)$"> as the input to the filter and find the 
  gain at a set of discrete frequencies including the resonant frequency (e.g., <!-- MATH
 $f=1, 
  2, 5, 7.5, 10, 20\; kHz$
 -->
<IMG
 WIDTH="214" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img31.png"
 ALT="$f=1,
2, 5, 7.5, 10, 20\; kHz$">). Compare your results with your analysis and simulation.

<P>
</LI>
<LI>Treat the same circuit as a low-pass (LP) filter (voltage across C as the output).
  Adjust <IMG
 WIDTH="19" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img4.png"
 ALT="$R$"> properly so that <!-- MATH
 $\zeta\ge 1/\sqrt{2}$
 -->
<IMG
 WIDTH="84" HEIGHT="43" ALIGN="MIDDLE" BORDER="0"
 SRC="img32.png"
 ALT="$\zeta\ge 1/\sqrt{2}$">, and the FRF does not peak. 
  Generate a linear and Bode plots of the magnitude of its FRF, same as what you did 
  before for the BP filter. Then feed a square wave signal as the input to the filter 
  and observe and describe the waveform of the output.

<P>
</LI>
<LI>Repeat the previous part when the same circuit is treated as a high-pass (HP) 
  filter (voltage across L as the output).

<P>
</LI>
<LI>Build the band-pass and band-stop filters discussed in class 
  (example at the bottom of <A NAME="tex2html2"
  HREF="http://fourier.eng.hmc.edu/e84/lectures/ch3/node17.html">this page</A>),
  using the same R, L and C in previous last two parts. Geernate the linear and Bode plots 
  as before. Feed a sinusoidal signal as the input to the filter and find the gain at a
  set of discrete frequencies (including the resonant frequency). Compare your results 
  with your analysis and simulation.

<P>
</LI>
</OL><HR>
<!--Navigation Panel-->
<A NAME="tex2html16"
  HREF="node2.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="file:/opt/local/share/lib/latex2html/icons/next.png"></A> 
<A NAME="tex2html14"
  HREF="RLClab.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/opt/local/share/lib/latex2html/icons/up.png"></A> 
<A NAME="tex2html8"
  HREF="RLClab.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/opt/local/share/lib/latex2html/icons/prev.png"></A>   
<BR>
<B> Next:</B> <A NAME="tex2html17"
  HREF="node2.html">About this document ...</A>
<B> Up:</B> <A NAME="tex2html15"
  HREF="RLClab.html">RLClab</A>
<B> Previous:</B> <A NAME="tex2html9"
  HREF="RLClab.html">RLClab</A>
<!--End of Navigation Panel-->
<ADDRESS>
Ruye Wang
2016-10-27
</ADDRESS>
</BODY>
</HTML>
