
\documentclass{article}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphics}
\usepackage{comment}
\usepackage{html,makeidx}


\begin{document}

{\Large \bf E84 Lab: EKG}


An electrocardiograph (ECG or EKG) plots the electrical 
activity of the heart over time. The following oscilloscope
trace shows a typical EKG waveform. The spikes are called the
QRS complex and correspond to muscle contraction during heart
beats, with a typical interval of 0.5-1 second depending on 
subject's heart rate. The signal is very small, on the order 
of a few milli-volts, and the source impedance is high.

Build a two-input EKG signal amplifier based on an instrumentation
amplifier discussed in
\htmladdnormallink{here}{../..//lectures/opamp/node3.html}:

\htmladdimg{../../lectures/figures/InstrumentationAmplifier.png}

Be aware that there may exist some small but non-zero DC offset 
voltage between the two signal electrodes. You may need to 
carefully adjust the overall gain of your instrumentation 
amplifier (by properly selecting the values of the resistors 
all in kilo-ohm range), so that it is large enough to amplify 
the desired AC EKG signal for it to be clearly observable, but
not too large so that the DC component of the output is not 
pushed to either the top or bottom rail, in which case the AC 
signal is no longer observable.

Also, your circuit may pick up some 50 Hz interference in the 
environment, which is to be filtered out in a future lab.

Two adhesive electrodes (available in the lab) go on your upper 
chest, above and to the left and right of your heart. A third 
reference electrode goes on your lower abdomen and connects to 
ground of your circuit. You may find it easiest to connect to
them with alligator clips and long wires. The signal of interest
is the difference between the two electrodes. Your circuit should
amplify the signal so that it is readable on the oscilloscope.

Submit a brief written report containing the following items:
\begin{itemize}
\item The circuit with all resistance values
\item The calculated gain and the actual gain
\item A print-out of the amplified EKG signal as the output of 
  the amplifier
\item A description of the EKG signal in terms of its amplitude, 
  DC offset, and frequency. 
\end{itemize}

This is a sample EKG signal obtained by an instrumentation 
amplifier:

\htmladdimg{../EKGplot.png}

\end{document}


\section{Transistor Testing}

Use the 
\htmladdnormallink{Type 575 semiconductor curve tracer}{http://en.wikipedia.org/wiki/Semiconductor_curve_tracer}
in the electronic lab to test 
\htmladdnormallink{2N3904}{http://www.fairchildsemi.com/ds/2N/2N3904.pdf}
transistors in common emitter mode. 
Observe and take pictures of both the input and output characteristic plots. 


{\bf Important note:} To make sure you do not burn your transistor, 
(a) study the data-sheet of the transistor to determine the leads for E, B and C,
(b) do not apply $V_{CC}$ voltage higher than 30 V.

\htmladdimg{../2n3904.gif}

{\bf Initial control knob settings before you start:}
\begin{itemize}
\item {\bf Display control} (top-right)
  \begin{itemize}
  \item Vertical axis (for $I_B$ or $I_C$): 1 mA/Div
  \item Horizontal axis ($V_{BE}$ or ``base voltage''): 0.1 or 0.5 V/Div
  \item Horizontal axis ($V_{CE}$ or ``collector voltage''): 2 V/Div
  \end{itemize}
\item {\bf Collector voltage} (lower-left)
  \begin{itemize}
  \item Peak voltage range: x1 (be careful to use x10 as maximum voltage is 200 V!)
  \item Polarity: + for npn transistors
  \item Peak Volt ($V_{CC}$): 10 to 20 Volts
  \item Dissipation limiting resistor ($R_C$): 1 k$\Omega$
  \end{itemize}
\item {\bf Base voltage} (lower-right)
  \begin{itemize}
  \item Repetitive/Single scan: 

    single for input characteristic plot, repetitive for output characteristic plot.
  \item Steps/family: 12
  \item Polarity: +
  \item Steps/Sec: 240
  \item Series resistor ($R_B$) (no relevance here)
  \item Step selection: $0.005 mA = 5 \mu A$
  \end{itemize}
\end{itemize}

{\bf What to observe:}

\begin{itemize}
\item The input characteristics (confirm $V_{BE}\approx 0.7\,V$ when
  $I_C=\beta I_B$ is in the range of 1 to 10 mA.)
\item The output characteristics 
  (observe how the load line changes when $V_{CC}$ and $R_C$ are 
  changed; find the $\beta=\Delta I_C/\Delta I_B$.)
\end{itemize}


{\bf What to submit:}

\begin{itemize}
\item Take screen-shots of both the input and output characteristic plots 
  observed on the semiconductor curve tracer with the following clear 
  labeled (with meaningful increment):
  \begin{itemize}
  \item The voltage (horizontal axis) $V_{BE}$ or $V_{CE}$
  \item The current (vertical axis) $I_B$ or $I_C$
  \item For the output plot, each one of the 12 $I_B$ values in the family
  \end{itemize}
\item Determine the value $\beta=I_C/I_B$ (also referred to as the 
  ``forward transfer current ratio'' and denoted by $h_f$ or $h_{FE}$ on
  the \htmladdnormallink{2N3904 data-sheet}{http://www.fairchildsemi.com/ds/2N/2N3904.pdf}
  (also see \htmladdnormallink{class notes}{http://fourier.eng.hmc.edu/e84/lectures/ch4/node7.html})
  from the output plot for each of the 5 transistors.
\item Determine $V_{BE}$ from the input plot when $I_B$ is within the range of
  0.01 to 0.1 mA, i.e., $I_C$ is within the range of $0.01\;\beta$ to $0.1\;\beta$.
\item Describe how the load line changes in the output plot when $R_C$ and $V_{CC}$
  are increased or decreased.
\end{itemize}


\section{Transistor Circuit Construction}


\begin{enumerate}

\item Design and build the voltage amplifier based on fixed biasing
  shown below. Determine the value of $R_B$, $R_C$, and $V_{CC}$ to
  achieve maximum voltage amplification and minimum distortion by 
  setting the DC operating point to be in the middle of the linear
  range of the output characteristic plot. 

  \htmladdimg{../../lectures/figures/ACamplification0a.png}.
  
  \begin{itemize}
  \item Calculate the DC operating point on the output characteristic 
    plot ($I_{C}$ and $V_{CE}$) based on your design, and compare it
    to the actual one measured from the actual circuit. 

  \item Test the circuit by a sinusoidal signal of 50 mV peak-to-peak 
    amplitude from signal generator (with output resistance 
    $R_S=50\,\Omega$) and an oscilloscope (with input resistance
    $R_{in}=1\,M\Omega$) to monitor the input and output signals both 
    before and after the amplification and to observe the voltage gain 
    and waveform distortion. Compare the predicted gain based on the
    small signal model with the actual one.

  \item Observe the polarity inversion and the signal distortion. 
    Increase the amplitude of the input sinusoid from 50 mV to 1 V 
    and observe the output in terms of the amount of distortion and 
    clipping at both the positive and negative peaks of the sinusoid.
  \end{itemize}

\item Repeat the above for the amplifier based on a self-biasing 
  circuit shown in the figure below. Determine the values of $R_1$, 
  $R_2$, $R_C$, and $R_E$ to achieve maximum voltage amplification and 
  minimum distortion by setting the DC operating point to be in the 
  middle of the linear range of the output characteristic plot. 

  Hint 1: To minimize distortion, the DC operating point 
  should be around the center of the linear region of the output
  characteristic plot, i.e., $V_{CE}\approx V_{CC}/2$.

  Hint 2: write a piece of Matlab code based on the equations for the
  self-biasing circuit given   
  \htmladdnormallink{here}{http://fourier.eng.hmc.edu/e84/lectures/ch4/node6.html}
  to calculates the DC operating point ($I_B$, $I_C$, $V_B$, $V_C$, $V_E$,
  and $V_{CE}=V_C-V_E$), based on the circuit parameters $V_{CC}$, $R_1$,
  $R_2$, $R_C$ and $R_E$ that you choose for your design.

  \htmladdimg{../../lectures/figures/ACamplification1.gif}.

  \begin{itemize}
  \item Calculate the DC operating point on the output characteristic 
    plot ($I_{C}$ and $V_{CE}$) based on your design, and compare it
    to the actual one measured from the circuit. 

  \item Test the circuit by a sinusoidal signal of 50 mV peak-to-peak 
    amplitude from signal generator and an oscilloscope monitor the 
    input and output signals both before and after the amplification 
    and to observe the voltage gain and waveform distortion. Compare 
    the predicted gain based on the small signal model with the actual 
    one.

  \item Observe the voltage gain as a function of the by-pass capacitor 
    in parallel with $R_E$, and the capacitors at both the input and 
    output ports, by trying different $C$ values. 

  \item Observe the voltage gain as a function of the signal frequency.
    Generate a Bode plot of the magnitude of the voltage gain for the 
    frequency range of 10 Hz to 1 MHz. Find the maximum voltage gain 
    $A_{max}$ and the frequency range in which this maximum gain is 
    achieved.

  \item Observe the polarity inversion and the signal distortion. 
    Increase the amplitude of the input sinusoid from 50 mV to 1 V 
    and observe the output in terms of the amount of distortion and 
    clipping at both the positive and negative peaks of the sinusoid.
  \end{itemize}

\item Connect a load resistor $R_L$ to the amplification circuit above, 
  measure the output voltage across $R_L$ as its value varies from 
  $1\,M\Omega$ to $10\,\Omega$ in decade scale. Then build an emitter
  follower as shown below and insert it in between the amplification 
  circuit and the load $R_L$. Re-measure the output voltage across $R_L$
  when its values varies as before. Explain what you observe.

  \htmladdimg{../../lectures/figures/EmitterFollower.png}.

\end{itemize}


{\bf What to submit:}

A text document that discusses concisely each of the items specified 
above, including 
\begin{itemize}
\item the design process by which you determine the circuit parameters
  (e.g., resistance values).
\item comparison of the predicted and measured DC operating points.
\item comparison of the predicted and measured AC voltage gains.
\item pictures of the screen-shots of the input/output voltages 
  of the circuits required in the lab. 
\end{itemize}


\end{document}






