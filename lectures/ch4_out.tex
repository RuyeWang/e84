\documentstyle[12pt]{article}
\usepackage{html}
%\usepackage{graphics}  
\begin{document}

{\bf Chapter 4: Semiconductor Devices}

\section*{Semiconductor materials}

The \htmladdnormallink{{\em vacuum tubes}}{http://en.wikipedia.org/wiki/Vacuum_tube#Diodes} were widely used for various purposes in electronics, mostly voltage 
and power amplification, before the invention of solid state semiconductor 
devices in the 1940's. Since then semiconductor devices have gradually replaced
vacuum tubes in most of such applications, due to many of their favorable 
properties such as small size, light weight, low energy consumption, high 
frequency capability, and high reliability. However, vacuum tubes can still 
find some applications even today, such as high power radio frequency transmitters
and microwave ovens. Although the physics of vacuum tubes and semiconductor 
devices is very different, the basic functions are similar, such as controlling
current through small voltage.


\begin{itemize}
\item {\bf Conductors and Insulators:} 

Good conductors, such as copper (Cu $2+8+18+1=29$), silver (Ag $2+8+18+18+1=47$),
and gold (Au $2+8+18+32+18+1=79$) can conduct electricity with little resistance 
because they only have one valence electron (electrons on the out-most layer of 
the atom) which is only loosely bound to the atom and can easily become freely
movable (free electrons) to conduct electricity. 

On the other hand, insulators do not conduct electricity as no free electrons 
exist in the material.

\htmladdimg{../figures/PeriodicTable.png}

\item {\bf Semiconductors:} 

The conductivity of those elements with four valence electrons is not as
good as the conductors but still better than the insulators, and they are
given the name semiconductors. The two semiconductors of great importance 
are silicon (Si $2+8+4=14$) and germanium (Ge $2+8+18+4=32$), both of which 
have four valence electrons. Their crystal structure (lattice) has a tetrahedral
pattern with each atom sharing one valence electron with each of its four 
neighbors (covalent bonds). 

If an electron gains enough thermal energy (1.1 eV for Si or 0.7 eV for
Ge), it may break the covalent bond and becomes a free electron of negative
charge, while leaving a vacancy or a hole of positive charge. In an electric
field, a free electron may move to a new location to fill a hole there, i.e.,
both such electrons and holes contribute to electrical conduction. Such 
crystal is called intrinsic semiconductor.

At room temperature, relatively few electrons gain enough energy to become
free electrons, the over all conductivity of such materials is low, thereby
their name semiconductors. 

\htmladdimg{../figures/Si.png}

\item {\bf Doped Semiconductors:}

The conductivity of semiconductor material can be improved by doping, i.e.,
by adding an impurity element with either three or five valence electrons,
called, respectively, trivalent and pentavalent elements. A semiconductor
is called either intrinsic or extrinsic, depending on whether it contains
any doped impurity.

\htmladdimg{../figures/elements.gif}

\htmladdimg{../figures/Si5.png}
\htmladdimg{../figures/Si3.png}

\begin{itemize}
\item {\bf N-type semiconductor:}

When a small amount of pentavalent donor atoms (e.g., phosphorus (P) and
Arsenic (As)) is added, a silicon atom in the lattice may be replaced by
a donor atom with four of its valence electrons forming the covalent bounds 
and one extra free electron. This is an {\em N-type} semiconductor whose 
conductivity is much improved compared to the intrinsic semiconductors, due 
to the extra free electrons in the lattice, which are called {\em predominant
or majority current carriers}. There also exist some tiny number of holes 
called {\em minority carriers}.

\item {\bf P-type semiconductor:}

When a small amount of trivalent acceptor atoms (e.g., boron (B) and aluminum
(Al)) is added, a silicon atom in the lattice may be replaced by an acceptor
atom with only three valence electrons forming three covalent bounds and a 
hole in the lattice. This is a {\em P-type} semiconductor whose conductivity 
is also much improved compared to the intrinsic semiconductors, due to the 
holes in the lattice, which are called {\em predominant or majority current 
carriers}. There also exist some tiny number of free electrons called 
{\em minority carriers}.
\end{itemize}

\htmladdimg{../figures/lattice.gif}

\item {\bf PN-Junction}

When P-type and N-type materials are in contact with each other, a 
PN-junction is formed due to these two effects:
\begin{itemize}
\item {\bf Diffusion:}

Although both sides are electrically neutral, they have different
concentration of electrons (the N-type) and holes (the P-type), and 
a {\em diffusion current} is formed by the diffusion of the higher
concentration of the freely movable electrons in the N-type material 
that move across the PN-junction from the N side to the P, due to the
thermal motion. They arrive at the P side to fill some of the holes
there. Equivalently, we can also consider the holes are diffusing
from the P side to the N side.

\item {\bf Electric Field}

If no other forces were involved, the diffusion would carry out 
continuously until the free electrons and holes are uniformly distributed
across both materials. However, as the result of the diffusion process,
electrical field is gradually established, negative on the side of P-type 
material due to the extra electrons, positive on the side of N-type 
material due to the loss of free electrons. This electrical field prevents
further diffusion as the electrons on the N-type side are expelled from
the P-type side by the electrical field.

\end{itemize}

\htmladdimg{../figures/pn_junction0.gif}

\htmladdimg{../figures/pn_junction1.gif}

The effects of both diffusion and electric field eventually lead to an 
equilibrium where the two effects balance each other so that there are
no more charge carriers (free electrons or holes) crossing the PN-junction.
This region around the PN-junction, called the {\em depletion region} as 
there no longer exist freely movable charge carriers, becomes a barrier 
between the two ends of the material that prevent current to flow through.

Additional notes semiconductor materials can be found
\htmladdnormallink{here}{../SemiConductorMaterials.pdf} and
\htmladdnormallink{here}{../SemiConductorMaterials2.pdf}.

{\bf Solar Cell}

A solar cell converts light energy to electrical energy and is a current source.
When a photon of light hits a piece of silicon, it either goes straight through
material if its energy is lower than the band-gap energy of the silicon semiconductor,
or is absorbed by the silicon if its energy is greater than the band-gap energy.
In the latter case, an electron-hole pair is produced, and the electron and hole
are separated by the internal electric filed near the PN-junction formed by the 
PN junction. Specifically, the electrons are pulled by the positive potential on
the N side and the holes are pulled by the negative potential on the P side, 
thereby forming a current through the external circuit. The solar cell is a 
current source, as the incoming flux of photons causes the current (not voltage).

\htmladdimg{../figures/solarcell.gif}

\end{itemize}

Additional notes on photodiodes, solar cells, and LEDs can be found
\htmladdnormallink{here}{../SemiConductorMaterials3.pdf}.

More detailed discussion about semiconductor physics can be found
\htmladdnormallink{here}{http://ecee.colorado.edu/~bart/book/book/contents.htm}

\section*{Diodes}

A diode is formed by a PN-junction with the p side called {\em anode} and the
n side called {\em cathode}. Due to the fact that there exist few freely movable 
charge carriers in the depletion region around the PN-junction, the conductivity
is very poor. However, when external voltage is applied to the two ends of the 
material, the conductivity may change, depending one the polarity of the applied
voltage.

\htmladdimg{../figures/diode6.gif}

\begin{itemize}
\item {\bf Forward bias} (positive to P-type, negative to N-type)

  The positive voltage applied to the P-type will pull electrons in N-type
  and repel holes in P-type so that both carriers are moving towards the 
  PN-junction. As the depletion region becomes thinner, the conductivity 
  increases due to the {\em drift current} through the PN-junction from 
  the P side to the N side, formed by the majority charge carriers (both 
  electrons and holes) driven by the applied voltage. The conductivity 
  increases as the applied voltage becomes higher. 

\item {\bf Reverse bias} (negative to P-type, positive to N-type)

  The negative voltage applied to the P-type will repel electrons in N-type
  and attract holes in P-type so that both carriers are moving away from 
  the PN-junction. As the depletion region becomes thicker than before, 
  there is no current through the PN-junction from the P side to the N side.
  However, there exists a very small current $I_0$, called the 
  {\em reverse saturation current}, due to the minority carriers.
  (The carrier velocity increases as the applied voltage becomes higher. 
  However, as the voltage further increases, the velocity will reach a 
  maximum level called
  \htmladdnormallink{{\em saturation volocity}}{http://en.wikipedia.org/wiki/Velocity_saturation})

%http://ecee.colorado.edu/~bart/book/book/chapter2/ch2_7.htm#2_7_3}.)
  

\end{itemize}
The voltage-current behavior of a PN-junction is described by
\[
I_D=I_0 \left( e^{V_D/\eta V_T}-1 \right), \;\;\;\;\mbox{or}\;\;\;\;
V_D=\eta V_T\;ln \left(\frac{I_D}{I_0}+1\right)
=\eta V_T\;ln \left(\frac{I_D+I_0}{I_0}\right)	
\]
where 
\begin{itemize}
\item $I_0$ is the {\em reverse saturation current}, a tiny current that 
  flows in the reverse direction when $V_D < 0$, due to the minority 
  carriers. As this current is limited by the minority carriers available,
  it is called saturation current. $I_0$ is about $10^{-10} \sim 10^{-12}$ 
  A for Si and $10^{-4}$ A for Ge.
\item $ V_T=kT/e $ is the thermal voltage, where 
  $k=1.38\times 10^{-23}$ Joules/Kelvin is Boltzmann's constant, 
  $e=1.602\times 10^{-19}$ coulomb is the charge of an electron, and
  $T$ is the temperature in degree K. For room temperature $T=300K$, 
  $V_T=kT/e=26\; mV$.
\item $\eta$ is the ideality factor which varies between 1 and 2, depending
  on the fabrication process and semiconductor material. In many cases $\eta$
  can be assumed to be approximately equal to 1.
\end{itemize}
In particular, 
\begin{itemize}
\item when $V_D<0$, $I_D=-I_0$; 
\item when $V_D=0$, $I_D=0$; 
\item when $V_D>0$, $I_D\approx I_0 e^{V_D/V_T}$.
\end{itemize}

\htmladdimg{../figures/diode1.gif}

The voltage $V_D$ across the diode is a function of the current $I_D$ through 
the diode. In the range of 5 mA to 20 mA, $V_D$ is about 0.7 V:

\begin{tabular}{c||c|c|c|c|c}\\ \hline
$I_D$	& 1 mA & 5 mA & 10 mA & 20 mA & 100 mA	\\ \hline
$V_D$ for Si ($I_0=10^{-10}$, $\eta=1.4$) & 0.58 V & 0.65 & 0.67 V & 0.7 & 0.75 V \\
$V_D$ for Ge ($I_0=10^{-4}$, $\eta=1.0$) & 0.06 V & 0.10 & 0.12 V & 0.14 & 0.18 V \\
\end{tabular}


The resistance of an electrical device is defined as $R=\Delta V/\Delta I$.
For a diode, as $V_D(I_D)$ is not a linear function, the resistance 
$R_D=dV_D/dI_D$ can be found as
\[
R_D=\frac{d\,V_D}{d\,I_D}=\frac{d}{d\,I_D} \left[\eta V_T\;ln \left(\frac{I_D+I_0}{I_0}\right) \right]
=\eta V_T \frac{I_0}{I_D+I_0}\frac{1}{I_0}=\eta \; \frac{V_T}{I_D+I_0}
\approx \eta \; \frac{V_T}{I_D}	
\]
The last approximation is due to the fact that $I_D \gg I_0$, i.e., 
$I_D+I_0\approx I_D$. We assume $V_T=26\;mV$, $\eta=1.4$, the resistance
of the diode is not a constant, but a function of the current $I_D$, i.e., 
a diode is not a linear element:

\begin{tabular}{c||c|c|c|c|c|c|c}\\ \hline
$I_D$	& 0.05 mA & 0.1 mA & 0.2 mA & 0.5 mA & 1 mA & 2 mA & 5 mA \\ \hline
$R_D$ for Si ($\eta=1.4$) & $728\,\Omega$ & $364\,\Omega$ & $182\,\Omega$ & 
  $73\,\Omega$ & $36\,\Omega$ & $18\,\Omega$ & $7\,\Omega$ \\
\end{tabular}


{\bf Models of diodes:}

\htmladdimg{../figures/diode3.gif}

\begin{itemize}
\item Ideal model: 
  if $V_D<0$, $R_D=\infty$, $I_D=0$, else $R_D=0$, $I_D=V/R$.
\item Ideal model with a voltage threshold $0.7\,V$:
  if $V_D<V_0$, $I_D=0$, else $V_D=0.7$, $I_D=(V-0.7)/R$
\item The model above in series with a resistance $R_D=20\Omega$:
  if $V_D<V_0$, then $I_D=0$, else $I_D=(V-0.7)/(R+R_D)$
\item The model above in parallel with a current source that simulates
  the reverse saturation current.
\end{itemize}

\htmladdimg{../figures/diodemodel.gif}
\htmladdimg{../figures/diodemodels.gif}

In general, when the forward voltage applied to a diode exceeds 0.6 to 
0.7V for silicon (or 0.1 to 0.2 V for germanium) material, the diode is 
assumed to be conducting with very little resistance.

{\bf Example 1: } In the half-wave rectifier circuit shown below, 
$R=1000\Omega$, $V=3V$, and $D$ is a silicon diode. Find the current
$I_D$ through and voltage $V_D$ across $D$.

\htmladdimg{../figures/diode2.gif}

\begin{itemize}

\item {\bf Method 0:} The simplest model is to assume the diode is an ideal
  rectifier with infinite resistance when it is reverse biased but zero
  resistance when it is forward biased. As the diode is forward biased,
  the current is $I_D=V/R=3\;mA$.

\item {\bf Method 1: } Since the diode is forward biased, we can assume 
  the voltage across the diode is $0.7V$ and the current can be determined 
  by Ohm's law to be $I_D=(V-0.7)/R=2.3/1000=2.3\;mA$.

\item {\bf Method 2: } The diode is modeled as a series combination of
  $V_0=0.7\;V$, $R_D=20\Omega$, and an ideal diode. $I_D=(3-0.7)/(1000+20)=2.255\;mA$,
  $V_D=0.7+I_DR_D=0.745\;V$.

\item {\bf Method 3: } The current $I_D$ and voltage $V_D$ have to satisfy 
  two equations simultaneously:
  \[
  \left\{ \begin{array}{l} I_D=I_0(e^{V_D/V_T}-1) \\
    V_D=V-RI_D \end{array} \right. 
  \]
  The first equation relates the current $I_D$ through and voltage $V_D$ 
  across a diode, while the second is obtained by KVL. Substituting the first
  equation into the second, we get $V_D=V-RI_0(e^{V_D/V_T}-1)$. Substituting
  this into the first equation we can then find $I_D$.

\item {\bf Method 4: } The two simultaneous equations above can also be
  solved graphically. The first equation $I_D=I_0(e^{V_D/V_T}-1)$ is the
  characteristic curve of the diode, while the second equation $V=V_D+I_DR$
  is the load line, a straight line passing through $(V_D=0, I_D=V/R)$ and 
  $(I_D=V, I_D=0)$. The intersection point of the two curves is approximately
  at $(V_D=0.75\;V, I_D=2.4\;mA)$.

\end{itemize}

Diodes are typically used as rectifiers which convert an AC voltage/current
in to a DC one, such as shown in the following example.

{\bf Example 2: } Design a converter (adaptor) that converts AC power 
supply of 115V and 60 Hz to a DC voltage source of 14 V. When the load is
$R_L=10\;K\Omega$, the variation (ripple) of the output DC voltage must 
be 5\% or less.

\htmladdimg{../figures/halfwaverectifier.gif}

\htmladdimg{../figures/diode4.gif}

\begin{itemize}
\item The desired DC voltage is 14 V, but we also need to compensate for the
  voltage drop of 0.7 V due to the forward biased diode, so the  peak of the
  secondary output is $14.7\;V$ with RMS value $14.7/\sqrt{2}=10.4V$, the ratio
  of the transformer should be $115/10.4=11$. 
\item When the load is $R_L=10\;K\Omega$, the load current is approximately
  $I\approx V/R_L=14/10=1.4\;mA$.
\item During the period between two peaks $T=1/f=1/60=16.7\;ms$, the charge 
	on the capacitor is reduced by $\Delta Q\approx IT=1.4\;mA\times 
        16.7\;ms=23.4\;\mu C$. 	
\item The voltage across the capacitor is therefore dropped by
	$\Delta V=\Delta Q/C < 14\times 5/\%=0.7V $. 
\item Solve above equation for $C$, we get $C=\Delta Q/\Delta V
  =23.4\;\mu C/0.7V=33.4\;\mu F$.
\end{itemize}
This is an approximation based on the assumption that the load current is
constant, as the voltage drop is small. Otherwise the exponential decay of
the voltage across capacitor should be used, and the current is:
\[	i(t)=\frac{V}{R_L} e^{-t/\tau}	\]

\section*{Bipolar Junction Transistor (BJT)} 
\htmladdnormallink{(External reference on Wikipedia)}{http://en.wikipedia.org/wiki/Bipolar_junction_transistor}

A Bipolar Junction Transistor (BJT) has three terminals connected to three
doped semiconductor regions. In an NPN transistor, a thin and lightly doped 
P-type {\em base} is sandwiched between a heavily doped N-type {\em emitter}
and another N-type {\em collector}; while in a PNP transistor, a thin and 
lightly doped N-type {\em base} is sandwiched between a heavily doped P-type
{\em emitter} and another P-type {\em collector}. In the following we will 
only consider NPN BJTs.

\htmladdimg{../figures/transistors1.gif}

\htmladdimg{../figures/transistorBJT1.gif}

In many schematics of transistor circuits (especially when there exist a
large number of transistors in the circuit), the circle in the symbol of
a transistor is omitted. The figures below show the cross section of two
NPN transistors. Note that although both the collector and emitter of a
transistor are made of N-type semiconductor material, they have totally
different geometry and therefore can not be interchanged.

\htmladdimg{../figures/transistorBJT2a.gif}

\htmladdimg{../figures/transistorBJT2b.gif}

All previously considered components (resistor, capacitor, inductor, and 
diode) have two terminals (leads) and can therefore be characterized by 
the single relationship between the current going through and the voltage 
across the two leads. Differently, a transistor is a three-terminal component,
which could be considered as a two-port network with an input-port and an
output-port, each formed by two of the three terminals, and characterized
by the relationships of both input and output currents and voltages.

Depending on which of the three terminals is used as common terminal, there
can be three possible configurations for the two-port network formed by a
transistor: 
\begin{itemize}
\item Common emitter (CE), 
\item Common base (CB), 
\item Common collector (CC).
\end{itemize}

\htmladdimg{../figures/transistors2.gif}

\begin{itemize}
\item {\bf Common-Base (CB) configuration}

  Two voltages $V_{BE}$ and $V_{CB}$ are applied respectively to the emitter
  $E$ and collector $C$, with respect to the common base $B$, so that the 
  BE junction is forward biased while the CB junction is reverse biased.

  \htmladdimg{../figures/CB.gif}

  %\htmladdimg{../figures/transistorDC.gif}

  \htmladdimg{../figures/CBnpn.gif}

  %\htmladdimg{../figures/transistorDC1.gif}

  The behavior of the NPN-transistor is determined by its two PN-junctions:

  \begin{itemize}
  \item The forward biased base-emitter (BE) PN-junction allows the free 
    electrons in emitter to go through the PN-junction to arrive at the base,
    forming the emitter current $I_E$.
  \item As the P-type base is thin and lightly doped, only a small number 
    of the electrons from the emitter are combined with the holes in base
    to form the base current $I_B$.
  \item Most of the electrons coming from the emitter become minority 
    carriers in the P-type base, and they go through the reverse biased
    collector-base PN junction to arrive at the collector.
  \item The percentage of those electrons that arrive at the collector out 
    of the electrons from the emitter is defined as $\alpha$ (e.g.,
    $\alpha=99\%=0.99$).
  \item The minority carriers originally in the base and collector also go 
    through the reverse biased collector-base PN junction to form the 
    {\em collector-base saturation current} $I_{CB0}$.
  \item The total collector current $I_C$ is therefore:
    \[
    I_C=\alpha I_B+I_{CB0}\approx \alpha I_E
    \]
    The approximation is due to the fact that $I_{CB0}\ll \alpha I_E$
  \end{itemize}

  The {\em current gain} or {\em current transfer ratio} is defined as the 
  ratio between the emitter (input) current $I_E$ and the collector (output)
  current $I_C$:
  \[ 
  \frac{I_C}{I_E}\approx \alpha <1,\;\;\;\;\;\mbox{i.e.}\;\;\;\; I_C=\alpha I_E
  \]
  The base current $I_B$ is:
  \[
  I_B=I_E-I_C\approx I_E-\alpha I_E=(1-\alpha)I_E 
  \]

  The CB configuration can be considered as a 2-port circuit. The input
  port is formed by the emitter and base, the output port is formed by the 
  collector and base. The relationships between the current and voltage of
  both the input and output ports are described by the following input and 
  output characteristics.

  \begin{itemize}
  \item {\bf Input characteristics:} 

    This is the relationship between $I_E$ and $V_{BE}$ both associated with the
    input port:
    \[ 
    I_E=f(V_{BE}, V_{CB})\approx f(V_{BE})=\frac{1}{1-\alpha}\,I_B
    =\frac{1}{1-\alpha} I_0 ( e^{V_{BE}/V_T}-1 )	
    \]
    Here
    \[
    I_B=I_0 ( e^{V_{BE}/V_T}-1 )	
    \]
    as the EB junction is essentially the same as a forward biased diode. Also,
    higher $V_{CB}>0$ can slightly increase $I_E$.

  \item {\bf Output characteristics:} 

    This is the relationship between $I_C$ and $V_{CB}$ both associated with the
    output port:
    \[ 
    I_C=f(I_E,V_{CB})\approx f(I_E)=\alpha I_E,\;\;\;\;\;\;\;\mbox{(in linear region)} 
    \]
    When $V_{CB}>0$, i.e., the CB junction is reverse biased, the current $I_C$ 
    depends totally on $I_E$. When $I_E=0$, $I_C=I_{CB0}$ is the current caused by 
    the minority carriers crossing the PN-junction. This is similar to the diode
    current-voltage characteristics seen before, except both axes are reversed 
    (as both $I_{CB}$ and $I_C$ are defined in the opposite directions). When $I_E$
    is increased, $I_C=\alpha I_E+I_{CB0}$ is increased correspondingly. Higher $V_{CB}$
    can slightly increase $I_C$. 

    As $I_C=\alpha I_E<I_E$, CB configuration does not have current-amplification 
    effect. However, if $V_{BE}$ is held constant, $I_E$ and therefore $I_C$ will
    also be held constant, i.e., CB transistor circuit can be used as a current 
    source.

    \htmladdimg{../figures/TransistorCBplots.gif}

  \end{itemize}

\item {\bf Common-Emitter (CE) configuration}

  Two voltages $V_{BE}$ and $V_{CE}$ are applied respectively to the base $B$ and 
  collector $C$ with respect to the common emitter $E$. Same as the CB configuration,
  here in the CE configuration, the BE junction is forward biased while the CB 
  junction is reverse biased. The voltages of CB and CE configurations are related by:
  \[ 
  V_{CE}=V_{CB}+V_{BE},\;\;\;\;\;\mbox{or}\;\;\;\;\;  V_{CB}=V_{CE}-V_{BE}
  \]

  \htmladdimg{../figures/CE1.png}

  \htmladdimg{../figures/CEnpn.gif}

  The base current $I_B$ is treated as the input current, and the collector
  current $I_C$ is treated as the output current:
  \[
  I_C=\alpha I_E+I_{CB0}=\alpha (I_C+I_B) + I_{CB0}
  \approx \alpha (I_C+I_B) 
  \]
  Solving this equation for $I_C$, we get the relationship between the 
  output $I_C$ and the input $I_B$:
  \[ 
  I_C=\frac{\alpha}{1-\alpha} I_B+\frac{1}{1-\alpha} I_{CB0}
  =\beta I_B +(\beta+1)I_{CB0}=\beta I_B + I_{ce0}
  \approx \beta I_B 
  \]
  where $I_{CE0}=(\beta+1)I_{CB0}$ is the reverse saturation current between 
  collector and emitter. 

  Here we have also defined the CE {\em current gain} or 
  {\em current transfer ratio}
  \[
  \beta=\frac{\alpha}{1-\alpha}\approx\frac{I_C}{I_B}
  \]
  which is approximately the ratio of the output current $I_C$ and the input
  current $I_B$. The two parameters $\alpha$ and $\beta$ are related by:
  \[
  \beta=\frac{\alpha}{1-\alpha},\;\;\;\;\;\;\alpha=\frac{\beta}{1+\beta},
  \;\;\;\;1+\beta=\frac{1}{1-\alpha},\;\;\;\;\;1-\alpha=\frac{1}{1+\beta} 
  \]
  For example, if $\alpha=0.99$, then $\beta=0.99/(1-0.99)=99$. 

  The CE configuration can be considered as a 2-port circuit. The input
  port is formed by the base and emitter, the output port is formed by the 
  collector and emitter. The relationships between the current and voltage
  of both the input and output ports are described by the following input
  and output characteristics.

  \begin{itemize}
  \item {\bf Input characteristics:} 

    Same as in the case of common-base configuration, the EB junction of the
    common-emitter configuration can also be considered as a forward biased
    diode, the current-voltage characteristics is similar to that of a diode:
    \[
    I_B=f(V_{BE},V_{CE})\approx f(V_{BE})=I_0 ( e^{V_{BE}/V_T}-1 )	
    \]
    $V_{CE}$ has little effect on $I_B$.
    
  \item {\bf Output characteristics:} 
    \[
    I_C=f(I_B,V_{CE})\approx f(I_B)=\beta I_B\;\;\;\;\;\;\;\;\;\;\mbox{(in linear region)} 
    \]
    Higher $V_{CE}>0$ can slightly increase $I_C$.

    The CB junction is reverse biased, the current $I_C=\beta I_B+I_{CE0}=
    \beta I_B+(\beta+1)I_{CB0}$ depends on the current $I_B$. When $I_B=0$, 
    $I_C=I_{ce0}$, the current caused by the minority carriers crossing the 
    PN-junctions. When $I_B$ is increased, $I_C$ is correspondingly increased 
    by $\beta$ fold.

    \htmladdimg{../figures/TransistorCEplots.gif}
    
  \end{itemize}
\end{itemize}

The relationship between the input and output currents of both CB and CE 
configurations is summarized below:
\begin{itemize}
\item CB
  \[ 
  \left\{ \begin{array}{l}
    I_{out}=I_C=\alpha I_E=I_{in},\;\;\;\;\;\;(\alpha: \mbox{CB current gain})
    \\
    I_B=I_E-I_C=I_E-\alpha I_E=(1-\alpha)I_E
  \end{array} \right.   
  \]
  \htmladdimg{../figures/CommonBase.png}
\item CE
  \[ 
  \left\{ \begin{array}{l} 
    I_{out}=I_C=\beta I_B=\beta I_{in},\;\;\;\;\;\;(\beta: \mbox{CE current gain})
    \\
    I_E=I_C+I_B=(\beta+1) I_B
  \end{array} \right.   
  \]
  \htmladdimg{../figures/CommonEmitter.png}
\end{itemize}


The collector characteristics of the common-base (CB) and common-emitter 
(CE) configurations have the following differences:
\begin{itemize}
\item In CB circuit $I_C=\alpha I_E$ is slightly less than $I_E$, while 
  in CE circuit $I_C=\beta I_B$ is much greater than $I_B$.
\item In CB circuit, $I_C>0$ when $V_{CB}=0$; while in CE circuit $I_C=0$
  when $V_{CE}=0$ (as $V_{CB}=-V_{BE}$ has the effect of suppressing $I_C$).
\item Increased $V_{CE}$ will slightly increase $\alpha$ but more
  greatly increase $\beta=\alpha/(1-\alpha)$, thereby causing more 
  significantly increased $I_C$.
\item $I_E$ in CB is a function of two variables $V_{BE}$ and $V_{CB}$,
  but the former is much more significant then the latter.
  $I_B$ in CE is a function of two variables $V_{BE}$ and $V_{CE}$,
  but the former is much more significant then the latter.
\item $I_C$ in CB is a function of two variables $V_{CB}$ and $I_E$. 
  When $V_{CB}$ is small, its slight increase will cause significant increase 
  of $I_C$. But its further increase will not cause much change in $I_C$ due 
  to saturation (all available charge carriers travel at the saturation velocity
  to arrive at collector C), $I_C=\alpha I_E$ is mostly determined by $I_E$.
\item $I_C$ in CE is a function of two variables $V_{CE}$ and $I_B$. 
  When $V_{CE}$ is small ($\approx 0.3V$), its slight increase will cause 
  significant increase of $I_C$. But when $V_{CE}>0.3V$, its further increase 
  will not cause much change in $I_C$ due to saturation (all available charge 
  carriers travel at the saturation velocity to arrive at collector C), 
  $I_C=\beta I_B$ is mostly determined by $I_B$.
\end{itemize}

\htmladdimg{../figures/InputOutputChar.gif}

\htmladdimg{../figures/transistortemp.gif}

Various parameters of a transistor change as functions of temperature. 
For example, $\beta$ increases along with temperature.

\section*{DC operating point}

A typical CE circuit is shown in the figure below, where $I_E=I_B+I_C$,
$V_{in}=V_{BE}=V_B$, and $V_{out}=V_{CE}=V_C$.

%\htmladdimg{../figures/OperatingPoint.gif}
\htmladdimg{../figures/transistorbiasingc.gif}

The DC operating point (also known as bias point, quiescent point, 
or Q-point) is the DC steady-state operating condition of a transistor,
(with no AC input signal applied), determined by $I_B$ and $V_{BE}$ of 
the input port, and $I_C$ and $V_{CE}$ of the output port. 
\begin{itemize}
\item The input current $I_B$ and voltage $V_{BE}$ can be determined by 
  \begin{itemize}
    \item The base characteristics of the PN-junction between base B and 
      emitter E, and
    \item The external circuit including the voltage source $V_{CC}V$ and 
      resistor $R_B$, represented by the load line $V_{BE}=V_{CC}-I_C R_B$,
      which is the straight line that passes through the two special points 
      corresponding to the open-circuit voltage and short-circuit current: 
      \[
      (I_B=0,\;V_{BE}=V_{CC})\;\;\;\;\;\mbox{and}\;\;\;\;\;(I_B=V_{CC}/R_B,\;V_{BE}=0) 
      \]
  \end{itemize}
  The actual current $I_B$ and $V_{BE}$ can be found at the intersection of 
  the two curves, so that both the internal current-voltage characteristics 
  of the transistor and the external circuit parameters are both satisfied. 
  The voltage $V_{BE}$ can also be approximated to be abourt $0.7V$ when 
  $I_B$ is within its typical range in practice.

  \htmladdimg{../figures/fixedbias2.gif}

\item The output current $I_C$ and voltage $V_{CE}$ can also be determined by 
  \begin{itemize}
    \item The output characteristics of the transistor, and
    \item The external circuit including the voltage source $V_{CC}$ and 
      resistor $R_C$, represented by the load line $V_{CE}=V_{CC}-I_C R_C$, 
      which is the straight line that passes through the two special points
      corresponding to the open-circuit voltage and short-circuit current: 
      \[
      (I_C=0,\;V_{CE}=V_{CC})\;\;\;\;\;\mbox{and}\;\;\;\;\;(I_C=V_{CC}/R_C,\;V_{CE}=0) 
      \]
  \end{itemize}
  The actual current $I_C$ and voltage $V_{CE}$, the DC operating or Q point,
  can be obtained as the intersection of the load line and the curve of the 
  current-voltage characteristics, corresponding to a given base current $I_B$.

  \htmladdimg{../figures/loadlines.gif}
\end{itemize}

From the current-voltage plot of the output characteristics, we see that
the operation of a transistor can be in one of the three possible regions:
\begin{itemize}
\item {\bf Cut-off region:} 

  When $V_{BE}<0.7V$, or even negative, $I_B=0$, the output current is
  $I_C=I_{CE0} \approx 0$, $V_C=V_{CC}$, i.e., the transistor (between 
  collector and emitter) is cut off (immediate above the horizontal
  axis of the output plot).

\item {\bf Linear region:} 

  When the input voltage is about $V_{BE}\approx 0.7V$, $I_B>0$, the 
  transistor is in the linear range where the collector current 
  $I_C=\beta I_B$ is proportional to base current $I_B$, and 
  $V_C=V_{CC}-R_CI_C$. The CE transistor circuit in the linear 
  region is widely used for amplification.

\item {\bf Saturation region:} 

  When the input voltage $V_{BE}$ is further increased $I_B$ will be
  significantly increased (due to the exponential relationship between 
  $I_B$ and $V_{BE}$), the linear relationship $I_C=\beta I_B$ no longer 
  holds as $I_C$ approaches its maximum $V_{CC}/R_C$. The transistor is 
  is saturated and $V_{CE}\approx 0.2V$, independent of $I_B$ (to the 
  immediate right of the vertical axis of the output plot).

\end{itemize}

{\bf Example:} In the CE circuit shown below, $V_{CC}=12V$, $R_B=6 K\Omega$,
$R_C=2 K\Omega$, $\beta=60$. The load line can be determined by two points:
$(V_{CE}=0,\;I_C=V_{CC}/R_C=6\;mA)$ and $(I_C=0,\;V_{CE}=V_{CC}=12\;V)$. Find output
voltage $V_{out}=V_{CE}$ when $V_{in}$ takes the following values:

\htmladdimg{../figures/CEexample2.png}

\begin{itemize}
\item $V_{BE}=V_{in}=0<0.7V$, $I_B=0$ and $I_C=\beta I_B=0$, $V_C=V_{CC}=12\;V$,
  the transistor is cut off.

\item $V_{in}=1V$, $V_{BE}=0.7\;V$, and $I_B=(V_{in}-V_{BE})/R_B=(1-0.7)/6=0.05\;mA$.
  $I_C=\beta I_B=60\times 0.05\;mA=3\; mA$.
  $V_{CE}=V_{CC}-I_C R_C=12\;V-3\;mA \times 2\;K\Omega=6\;V$. 

  The transistor is in linear region.
 
\item $V_{in}=2V$. $I_B=(2-0.7)/6=0.22mA$, $I_C=\beta I_B=13\;mA$, and 
  $V_{CE}=12V-13mA\times 2K\Omega=-14\;V$.

  We get this unreasonable negative voltage $V_{CE}=-14\;V$ because the base 
  current $I_B$ is so high that the transistor is working in its saturation
  region where the linear relationship $I_C=\beta I_B$ is no longer applicable 
  (It is only valid in linear region). The actual output voltage can be 
  estimated to be about $V_{CE}=0.2V$, and the actual $I_C$ can be found to 
  be $(V_{CC}-V_{CE})/R_C=(12-0.2)/2=5.9\;mA$.
\end{itemize}

\section*{AC Signal Amplification}

The common-emitter transistor circuit is commonly used for voltage
amplification, as shown in the example below. Here we assume $V_{CC}=15V$
and $R_C=1.5K\;\Omega$, and $\beta=40$. 

\htmladdimg{../figures/transistoramplifier.gif}

{\bf The input voltage and current}

Assuming the transistor is properly biased so that $V_{BE}=0.7\,V$, we get
the input voltage $v_{in}(t)=v_{be}(t)$ as the superposition of DC component
$V_{BE}\,V$ and a {\em small} AC inpupt $v_{be}=0.02\;\cos\omega t\,V$:
\[
v_{be}(t)=V_{BE}+v_{be}=(0.7+0.02\;\cos\;\omega t) \;V 
\]
and find the base current $I_B$ by the input characteristic plot:

\htmladdimg{../figures/transistorinput.gif}

Due to the small dynamic range of the input voltage, the non-linear 
(approximately exponential) input characteristic can be linearized
locally as a resistance, the reciprocal of the slope of the input 
characteristic curve around $V_{BE}=0.7V$:
\[
r_{be}=\frac{\triangle v_{be}}{\triangle i_b}=20\,mV/0.05\;mA=400 \;\Omega
\]
The base current $i_b(t)$ can be approximated to be 
\[ 
i_b(t)\approx \left(0.1+\frac{\triangle v_{be}}{r_{be}}\right)\;mA
=\left(0.1+\frac{20\;\cos\;\omega t}{400}\right)\;mA
=(0.1+0.05\;\cos\;\omega t)\;mA =I_B+i_b
\]
which is also a superposition of a DC component $I_B=0.1\;mA$ and an AC 
component with an amplitude $0.05\;mA$. (Why can't we get the base current
as $i_b(t)=v_{be}(t)/r_{be}$?)

{\bf The output voltage and current}

The collector current $I_C$ and the output voltage $V_{CE}$ can be obtained
either algebraically or graphically:

\begin{itemize}
\item The output current:
  \[
  i_c(t)=I_C+i_c=\beta (I_B+i_b)=40\times (0.1+0.05\; cos\;\omega t)\,mA
  =(4 + 2\;\cos\;\omega t) \; mA 
  \]
\item The output voltage:
  \[
  v_c(t)=V_C+v_c=V_{CC}-R_C(I_C+i_c)=(15-1.5 (4 + 2\;\cos\;\omega t ))\,V
  =(9-3\;\cos\;\omega t) \; V  
  \]
\end{itemize}

The output characteristic plot is shown below:

\htmladdimg{../figures/transistorCEplots1a.gif}

Here the $\beta$ value is $\beta=\triangle I_C/\triangle I_B=2\;mA/0.05\;mA=40$.
The load line is the plot of equation $V_{CE}=V_{CC}-I_C R_C$, a straight line 
that goes through the two points:
\[ 
(I_C=0,\;V_{CE}=V_{CC}=15V) \;\;\;\mbox{and}\;\;\;
(V_{CE}=0,\;I_C=V_{CC}/R_C=15V/1.5\,k\Omega=10 mA) 
\]


Note:
\begin{itemize}
\item The AC sinusoidal component of the input voltage is amplified
  $3/0.02=150$ times.
\item The sinusoidal component of the output voltage ($-\cos\;\omega t$)
  is $180^\circ$ out of phase compared to that of the input signal 
  ($\cos\;\omega t$), i.e., the CE transistor circuit is a reverse amplifier.
\end{itemize}

The waveform of the output $v_c(t)$ may be distorted if the DC component of 
the input voltage $V_{BE}$ (and thereby, the base current $I_B$) is either too 
low or too high, causing the positive or negative peaks of the sinusoidal 
component to exceed the linear range of the output characteristic plot, as 
illustrated below:

%\htmladdimg{../figures/transistorQpoint1.gif}

\htmladdimg{../figures/InputOutputPlots5.png}

We see that severe distortion in output $v_c$ will be caused if a transistor 
amplification circuit is working near either the cutoff or the saturation 
region. It is therefore desirable to properly set the DC operating point 
around the middle of the linear range along the load line, to avoid to be
too close to either the saturation or cut-off region.

\htmladdimg{../figures/OperatingRegins.gif}


{\bf Example}

\htmladdimg{../figures/CEswitch.gif}

Assume $V_{CC}=15V$, $R_C=1.5\;k\Omega$, $\beta=50$. Given the input voltage 
$V_1=V_{BE}=0.2V,\;0.7V$ or $0.8V$, find the corresponding output voltage 
$V_2=V_{CE}=V_C$.

\begin{itemize}
\item $V_{BE}=0.2V < 0.7V$, the forward bias of BE PN-junction is insufficient
  for it to conduct current, we have $I_B=0$, $I_C=\beta I_B=0$, $V_2
  =V_{CC}-I_C R_C=V_{CC}=15V$. The transistor is cutoff (the switch is 
  {\em open} or open-circuit).
\item $V_{BE}=0.7V$, the BE PN-junction is forward biased, we can find $I_B$
  from the input characteristics, here assumed to be $0.1\;mA$, and get
  $I_C=\beta I_B=5\;mA$ and 
  $V_C=V_{CC}-I_C R_C=15-5\times 10^{-3} \times 1.5\times 10^{3} =7.5\; V$. 
  The transistor is in linear region.
\item $V_{BE}=0.8V>0.7V$, the BE junction is forward biased, we can find $I_B$
  from the input characteristics, here assumed to be $0.4\;mA$. If the linear
  relationship $I_C=\beta I_B$ were to hold, we would get $I_C=\beta I_B=20\;mA$
  and $V_C=V_{CC}-I_C R_C=15-20\times 10^{-3} \times 1.5\times 10^{3}=-15 V$. 
  This result is obviously wrong, indicating that the transistor is actually 
  in the saturation region (the switch is {\em closed} or short-circuit), 
  i.e., the linear relation $I_C=\beta I_B$ does not hold. In fact, it is 
  impossible for the transistor to draw $I_C=20\;mA$ from the voltage source, 
  as the maximum current is $I_C=V_{CC}/R_C=15\;V/1.5\; k\Omega=10\;mA$ when
  $V_{CE}=0$. In this case, the actual $V_{CE}$ can be approximated on the output 
  characteristics to be about $0.2V$, the intersection of load line and the 
  curve corresponding to $I_B=0.4\;mA$), and $I_C=(15-0.2)/1.5\approx 10\;mA$. 
\end{itemize}
{\bf Conclusion: } a change in input from 0.2V to 0.8V switches the output 
current from 0 to about 10 mA, and the output voltage from 15V to 0.2V,
and the transistor is in cut-off, linear, and saturation region, respectively. 
$I_C=\beta I_B$ is only valid when the transistor is in the linear region.

\section*{Biasing}

As shown before, the DC operating point of a transistor amplification circuit
needs to be set up properly (in the middle of the linear region) to avoid
signal distortion. We now consider how the operating point is determined by 
the biasing circuit, in terms of $R_B$, $R_C$, and $V_{CC}$.

\begin{itemize}
\item {\bf Fixed Current Biasing} This is the simplest biasing. 

\htmladdimg{../figures/transistorbiasinga.gif}

As mentioned before, the base current $I_B$ can be properly set by selecting
the voltage $V_{CC}$ and $R_B$, as the load-line shown in the input 
characteristic plot: 

\htmladdimg{../figures/fixedbias2.gif}

The voltage $V_{BE}$ can also be estimated to be $0.7V$, the base current can 
also be estimated to be:
\[
I_B=\frac{V_{CC}-V_{BE}}{R_B} \approx \frac{V_{CC}}{R_B}	
\]
The approximation is valid only if $V_{BE}=0.7$ is much smaller than $V_{CC}$.
The collector current is $\beta$ times $I_B$ if the transistor is in linear
region:
\[
I_C=\beta I_B=\beta \frac{V_{CC}-V_{BE}}{R_B} \approx \beta \frac{V_{CC}}{R_B}
\]
The output voltage is 
\[
V_{CE}=V_{CC}-I_C R_C	
\]
As both $I_C$ and $V_{CE}$ depend on $\beta$, which may differ for different
transistors and change depending on the temperatures the operating point may
be unstable and inconsistent. 

{\bf Example 1:} 

In the circuit of fixed current biasing, $V_{CC}=12V$, $R_B=560\,k\Omega$, 
$R_C=3\,k\Omega$. Find the operating point $(V_{CE},\;I_C)$ for $\beta=20,
\;100,\; 200$.

The load line corresponding to $V_C=V_{CC}-I_C R_C$ is determined by these
two points:
\begin{itemize}
\item When $V_C=0$, $I_C=12\,V/3\,k\Omega=4\,mA$ 
\item When $I_C=0\,mA$, $V_C=12\,V$
\end{itemize}
For minimum distortion, the DC operating point needs to be in the middle
of the load line with $V_{CE}=6\,V$ and $I_C=2\,mA$. We find $I_B$ (assuming
$V_{BE}=0.7\;V$) to be:
\[ 
I_B=\frac{V_{CC}-V_{BE}}{R_B}=\frac{12-0.7}{560\times 10^3}=0.02 \;mA 
\]

\begin{itemize}

\item When $\beta=20$,
  \[ 
  \begin{array}{l} I_C=\beta I_B=20\times 0.02=0.4 \;mA \\
    V_C=V_{CC}-R_C I_C=12-3\times 0.4=10.8\; V \end{array}	
  \]
  The operating point is too close to cut-off region.

\item When $\beta=100$, 
  \[
  \begin{array}{l} I_C=\beta I_B=100\times 0.02=2 \;mA \\
    V_C=V_{CC}-R_C I_C=12-3\times 2=6 \;V \end{array} 
  \]
  The operating point is in the middle of linear region, as desired.

\item When $\beta=200$,
  \[ 
  \begin{array}{l} I_C=\beta I_B=200\times 0.02=4 \;mA \\
    V_C=V_{CC}-R_C I_C=12-3\times 4=0 V \end{array} 
  \]
  In this case $I_C$ can no longer be determined by $I_C=\beta I_B$, as
  the operating point is in the saturation region. We approximate
  $V_{CE}=0.2$ and get the maximum $I_C$:
  \[
  I_C=\frac{V_{CC}-V_{CE}}{R_C}=\frac{12-0.2}{3}=3.7\;mA 
  \] 
\end{itemize}

The DC operating point (Q-point) of this fixed current biasing circuit
is not completely determined by the parameters of the circuit such 
as the resistors, as it is also directly affected by factors such 
as $\beta$ value and temperature. This situation can be improved by 
introducing negative feedback into the circuit.

\item {\bf Self-Biasing} 

To correct the problem above, self-biasing circuit shown below can be
used to decrease the effect of changing $\beta$ by negative feed back
due to the introduction of $R_E$.

\htmladdimg{../figures/transistorbiasingb.gif}

Qualitatively, an increased $I_C$ (due to increased for some reason
such as $\beta$, temperature) will cause the following to happen:
\[
I_C \uparrow \Longrightarrow V_E \uparrow \Longrightarrow V_{BE} 
\downarrow \Longrightarrow I_B \downarrow \Longrightarrow 
I_C=\beta I_B \downarrow	
\]
This is a negative feedback loop that tends to stabilize the operating point.

Quantitatively, we can analyze the circuit by first finding the base voltage 
and base current. If the base current is much smaller than the current through 
$R_2$, i.e., $I_B<<I_2$, then the basis voltage $V_B$ can be approximated 
to be (voltage divider):
\[
V_{BB}=V_{CC} \;\frac{R_2}{R_1+R_2}	
\]
Applying KVL to the base-emitter loop of the circuit, we get
\[
V_{BB}-V_{BE}-I_ER_E=V_{BB}-V_{BE}-(I_C+I_B)R_E=V_{BB}-V_{BE}-(\beta+1)I_BR_E=0 
\]
Solving for $I_B$, we get
\[ 
I_B=\frac{V_{BB}-V_{BE}}{(\beta+1)R_E},\;\;\;\;\;\;\;\;\;\;\;\;\;
I_C=\beta I_B=\frac{\beta(V_{BB}-V_{BE})}{(\beta+1)R_E}
\approx \frac{V_{BB}-V_{BE}}{R_E} 
\]
We see that $I_C$ is completely determined by $R_1$, $R_2$, and $R_E$, 
as well as $V_{CC}$, but it is independent of $\beta$.

However, if the condition $I_B \ll I_2$ is not satisfied, the method above 
is no longer valid. In this case, we can use Thevenin's theorem to replace 
the base circuit by an open circuit voltage $V_{Th}=V_{BB}$ (already found 
above), in series with the internal resistance $R_{Th}$ (with $V_{BB}=0$):
\[
R_{Th}=R_B=R_1||R_2=\frac{R_1R_2}{R_1+R_2}	
\]

\htmladdimg{../figures/transistorbiasing1.gif}

Applying KVL to the base loop we get 
\[
V_{BB}-I_BR_B-V_{BE}-(I_C+I_B)R_E=V_{BB}-V_{BE}-I_BR_B-(\beta+1)I_BR_E=0 
\]
Solving this equation for $I_B$, we get:
\[
I_B=\frac{V_{BB}-V_{BE}}{(\beta+1) R_E+R_B},\;\;\;\;\;\mbox{and}\;\;\;\;\;\;
I_C =\beta I_B=\frac{\beta(V_{BB}-V_{BE})}{(\beta+1) R_E+R_B} 
\]
If $R_E$ is not too small (strong negative feedback effect) and $R_B=R_1||R_2$
is not too large (strong voltege divider effect), so that $\beta 
R_E \gg R_B=R_1||R_2$ (e.g., $R_B \le \beta R_E/10$ even for a small $\beta$), 
then $I_C$ can be approximated as
\[
I_C \approx \frac{V_{BB}-V_{BE}}{R_E} 
\]
which is the same as what we got previously. In this case, $I_C$, and thereby 
$V_{CE}$ and the DC operating point, is determined only by the resistors of 
the circuit, independent of the $\beta$. Comparing this with fixed biasing 
with $I_C \approx \beta (V_{CC}-V_{BE})/R_B$ directly 
proportional to $\beta$, the self-biasing circuit has a much more stable 
operating point.

{\bf Example 2:} 

In the circuit of self-biasing, $V_{CC}=12V$, $R_1=42\,k\Omega$, 
$R_2=7\,k\Omega$, $R_E=1\,k\Omega$, $R_C=6\,k\Omega$, Assume $V_{BE}=0.7$.  
The load line is determined by this equation:
\[
V_{CE}=V_{CC}-I_CR_C-I_ER_E\approx V_{CC}-I_C(R_C+R_E)
\]
corresponding to these two points at $(V_{CE}=0,\;I_C=12/(6+1)=1.71\,mA)$
and $(V_{CE}=12V,\;I_C=0\,mA)$. For minimum distortion, the desired 
operating point is in the middle of the load line at 
$(V_{CE}=12/2=6V,\;I_C=1.71/2\approx 0.86\,mA$).

First, using the approximation method above we get:
\[ 
\begin{array}{l} R_B=R_1R_2/(R_1+R_2)=42\times 7/(42+7)=6\,k\Omega	\\
  V_{BB}=V_{CC} R_2/(R_1+R_2)=12\times 7/(42+7)=1.7\;V\\
  I_C \approx I_E=(V_{BB}-V_{BE})/R_E=(1.71-0.7)/1=1\;mA\\
  V_C=V_{CC}-R_CI_C\approx 12-6\times 1=6\;V\\
  V_E=R_EI_E\approx R_E I_C=1\times 1=1\;V \\
  V_{CE}=V_C-V_E=5\;V \end{array} 
\]
More accurate values for these currents and voltages can be found for each 
individual $\beta$ value:
\begin{itemize}
\item When $\beta=20$, 
  \[
  I_C=\beta I_B=\beta \frac{V_{BB}-V_{BE}}{(\beta+1) R_E+R_B}
  =\frac{20\times (1.7-0.7)}{21\times 1+6}
  \approx 0.74 mA	
  \]
  \[
  \begin{array}{l} 
    V_C=V_{CC}-I_CR_C=12-0.74 \times 6=7.56 V	\\
    V_E=I_E R_E=(I_C+I_B)R_E=(\beta+1)I_B R_E\approx 0.78\,V \\
    V_{CE}=V_C-V_E=7.56-0.78=6.78\,V \\
    V_B=V_E+V_{BE}=0.78+0.7=1.48\,V
  \end{array} 
  \]
  Note that the approximation of $V_B=1.7\;V$ obtained by voltage divider
  is not very accurate when compared with the actual value 
  $V_B=1.48\;V$.

\item When $\beta=100$, 
  \[ 
  I_C=\beta I_B=\beta \frac{V_{BB}-V_{BE}}{(\beta+1) R_E+R_B}
  =\frac{100\times (1.7-0.7)}{101\times 1+6} \approx 0.93 mA	
  \]
  \[ \begin{array}{l} 
    V_C=V_{CC}-I_CR_C=12-0.93 \times 6=6.42\,V	\\
    V_E=I_E R_E=(I_C+I_B)R_E\approx I_C R_E = 0.93\,mA\;1\,k\Omega=0.93\,V \\
    V_{CE}=V_C-V_E=6.42-0.93=5.49\,V \\
    V_B=V_E+V_{BE}=0.93+0.7=1.63\,V
  \end{array} 
  \]

\item When $\beta=200$, 
  \[
  I_C=\beta I_B=\beta\frac{V_{BB}-V_{BE}}{(\beta+1) R_E+R_B}
  =\frac{200\times (1.7-0.7)}{201\times 1+6}\approx 0.97 mA	
  \]
  \[ 
  \begin{array}{l} 
    V_C=V_{CC}-I_CR_C=12-0.97 \times 6=6.18\,V	\\
    V_E=I_E R_E=(I_C+I_B)R_E\approx I_C R_E=0.97\,mA\;1\,k\Omega=0.97\,V \\
    V_{CE}=V_C-V_E=6.18-0.97=5.21\,V \\
    V_B=V_E+V_{BE}=0.97+0.7=1.67\,V
  \end{array} 
  \]
\end{itemize}

\end{itemize}

{\bf Example 3}

In a fixed-current biasing transistor circuit, $R_B=200\,k\Omega$, $\beta=100$, 
$V_{CC}=12\,V$, find $R_C$ so that the DC operating point is in the middle
of the linear region of the output characteristic plot.

\[ 
I_B=\frac{V_{CC}-V_{BE}}{R_B}=\frac{12-0.7}{200}=0.056\,mA,\;\;\;\;\;
I_C=\beta I_B=5.6\,mA 
\]
For this DC operating point with $I_C=5.6\,mA$ to be in the middle of the
load line, we need to have 
\[ 
\frac{V_{CC}}{R_C}=\frac{12}{R_C}=2\times I_C=11.2\;mA,\;\;\;\;\;\mbox{i.e.}
\;\;\;\;\;R_C=\frac{12}{11.2}\approx 1.1\,k\Omega
\]
\[
V_{CE}=V_{CC}-R_CI_C=12\,V-1.1\,k\Omega\times 5.6\,mA=5.84\,V\approx 12/2\,V
\]
is indeed in the middle of the load line.

{\bf Example 4}

In a self-biasing transistor circuit, $R_1=R_2=100\,k\Omega$, $R_E=2\,k\Omega$, 
$\beta=100$, $V_{CC}=12V$, find $R_C$ so that the DC operating point is 
in the middle of the linear region of the output characteristic plot.

First convert the base circuit into its Thevenin's equivalent voltage 
source composed of
\[ 
R_{Th}=R_B=R_1||R_2=50\;k\Omega,\;\;\;\;\;\;\;V_{Th}=V_{BB}=V_{CC}\frac{R_2}{R_1+R_2}=6\,V 
\]
Then we get
\[ 
I_C=\frac{\beta(V_{BB}-V_{BE})}{(\beta+1)R_E+R_B}
=\frac{100\times(6-0.7)}{101\times 2+50}=\frac{530}{250}=2.12
\]
and
\[
V_{CE}=V_{CC}-(I_C+I_B) R_E-I_CR_C\approx V_{CC}-I_C(R_E+R_C)=12-2.12\times (2+R_C)
\]
To set this DC operating point to be in the middle of the load line, we need 
$V_{CE}=12/2=6\,V$, and solving the equation we get $R_C=0.83\,k\Omega$.



\section*{Small Signal Model and H parameters}

{\bf Two-port circuit:} 

\htmladdimg{../figures/twoportmodel.gif}
\htmladdimg{../figures/transistorHmodel.gif}

A transistor circuit can be treated as a two-port circuit with input and output
ports with four variables $(v_1, i_1, v_2, i_2)$. In general two of the four
variables are independent and the rest two can be expressed as their functions:
\[
	\left\{ \begin{array}{l} v_1=f_1(i_1,i_2) \\ v_2=f_2(i_1,i_2)
	\end{array} \right.
	\;\;\;\;\mbox{or}\;\;\;\;
	\left\{ \begin{array}{l} i_1=f_3(_1,v_2) \\ i_2=f_4(v_1,v_2)
	\end{array} \right.
	\;\;\;\;\mbox{or}\;\;\;\;
	\left\{ \begin{array}{l} v_1=f_5(i_1,v_2) \\ i_2=f_6(i_1,v_2)
	\end{array} \right.
\]
We use the third {\em hybrid} model to describe the CE transistor circuit with 
$v_1=v_{be}$, $i_1=i_b$, $v_2=v_{ce}$, and $i_2=i_{ce}$:
\[
	\left\{ \begin{array}{l} v_{be}=v_{be}(i_b,v_{ce}) \\ i_c=i_c(i_b,v_{ce})
	\end{array} \right.
\]
Taking the total derivative, we get:
\[
	dv_{be}=\frac{\partial v_{be}}{\partial i_b} d i_b
	+\frac{\partial v_{be}}{\partial v_{ce}} d v_{ce} 
	=h_i d i_b+h_r d v_{ce}	
	\;\;\;\;\;\;
	di_c=\frac{\partial i_c}{\partial i_b} d i_b
	+\frac{\partial i_c}{\partial v_{ce}} d v_{ce} 
	=h_f d i_b+h_o d v_{ce}
\]
where $h_i, h_f, h_r, h_o$ are the hybrid model parameters:
\begin{itemize}
\item $h_i=\partial v_{be}/\partial i_b=r_{be}$: input impedance with 
  $v_{ce}=0$ (output short-circuit). This is AC resistance between base and 
  emitter, the reciprocal of the slope of the current-voltage curve of the 
  input characteristics. 

\item $h_r=\partial v_{be}/\partial v_{ce}$: reverse transfer voltage ratio
  with $i_b=0$ (input open-circuit), representing how $V_{CE}$ affects $V_{BE}$.
  In general $h_i$ is small and can be ignored.

\item $h_f=\partial i_c/\partial i_b=\beta$: forward transfer current 
    ratio or current amplification factor  with $v_{ce}=0$ (output 
    short-circuit). Typically, $h_f=\beta$ is in the range of 20 to 200.

\item $h_o=\partial i_c/\partial v_{ce}=1/r_{ce}$: output admittance with 
  $i_b=0$ (input open-circuit). It is slope of the current-voltage curve in 
  the output characteristics. In general $h_o$ is small and can be ignored.
\end{itemize}
If all variables $i_b$, $v_{be}$, $i_c$ and $v_{ce}$ are small signals (around 
the DC operating point $Q$ and far away from either the cut-off or the saturation 
region), these differential quantities can be rewritten as 
\[
	v_{be}=\frac{\partial v_{be}}{\partial i_b}
	i_b+\frac{\partial v_{be}}{\partial v_{ce}} v_{ce}=h_i i_b+h_r v_{ce}	
	\approx h_i i_b
	\;\;\;\;\;\;
	i_c=\frac{\partial i_c}{\partial i_b} i_b
	+\frac{\partial i_c}{\partial v_{ce}} v_{ce}=h_f i_b+h_o v_{ce}
	\approx h_f i_b
\]

\htmladdimg{../figures/hparameters.gif}

\htmladdimg{../figures/smallsignalmodelBJT1.gif}

In general, $h_r$ and $h_o$ are small and could be assumed zero to further 
simplify the model (right of the figure above) containing only two components, 
a resistor $h_i=r_{be}$ and a current source $h_f I_B=\beta I_B$.

The base and emitter forms a PN-junction with a resistance $r_{be}$ 
\[	
r_{be}=\frac{V_T}{I_B}	
\]
as discussed in the section of diodes. Typically, $V_T=26 mV$ (room temperature)
and if $I_B=0.05 \sim 0.1 mA$, then $r_{be}$ is about $200 \sim 600\;\Omega$.
Based on this small signal model, a transistor can be analyzed as a two-port 
circuit containing a resistor $r_{be}$ and a current source $\beta I_B$.

In summary, we see that there are two aspects of a transistor circuit: (a) the
DC operating point, in terms of the DC currents $I_B$, $I_C$ and $I_E$ and 
voltages $V_{BE}$ and $V_{CE}$, and (b) the AC small-signal model, by which all 
of the voltage-current relationships associated with the transistor are linearized
based on the assumption that the signal is small and the dynamic range in totally
within the linear region of both the input and output characteristic plots. When
analyzing the transistor circuit with an AC input signal (riding on top of a DC 
input), we need to consider both aspects. If the DC operating point is set up 
properly, i.e., in the middle of the linear region of output characteristic
plot, and if the signal is small enough so that the dynamic range is inside 
the linear region, then the linear small-signal model applies and the circuit
can be analyzed as a linear system.


\section*{AC Amplification}


Previously we considered a simple circuit composed of a source of $V_S$ and
$R_S$ and a load of $R_L$. Now we generalize this idea to a more complicated
circuit containing an amplification circuit shown on top of the figure below,
where everything, including the amplifier as well as $V_S$ and $R_S$, inside 
the red box is treated as the source, while everything, including the 
amplifier as well as $R_L$, inside the blue box is treated as the load.
Given the amplifier as well as the source $V_S$ and $R_S$, and the load 
$R_L$, we need to find $R_{in}$, $R_{out}$ and also the voltage gain $A$.

\htmladdimg{../figures/AmplifierSourceLoad.gif}

Based on the previous discussion, a single transistor AC amplification circuit 
is given as shown in the figure.

\htmladdimg{../figures/ACamplification1.gif}

If the capacitances of the coupling capacitors and the emitter by-pass 
capacitor are large enough with respect to the frequency of the AC signal 
in the circuit is high enough, these capacitors can all be approximated as 
short circuit. Moreover, note that the AC voltage of the voltage supply
$V_{CC}$ is zero, it can be treated the same as the ground. Now the AC
behavior of the transistor amplification circuit can be modeled by the 
following small signal equivalent circuit:

\htmladdimg{../figures/ACamplification2a.gif}

\htmladdimg{../figures/ACamplifierModel.gif}

As shown above, this AC small signal equivalent circuit can be modeled 
by as an active circuit containing three components:

\begin{itemize}
\item {\bf AC Input Impedance:} 

  For AC signals, the input of the amplification circuit is shown below, 
  where $R_s$ is the internal resistance of the signal source, and the 
  input impedance of the circuit is the three resistances $R_1$, $R_2$ and 
  $r_{be}$ in parallel:
  \[	
  R_{in}=R_1||R_2||r_{be}
  =\left(\frac{1}{R_1}+\frac{1}{R_2}+\frac{1}{r_{be}}\right)^{-1}
  =\frac{R_1 R_2 r_{be}}{R_1R_2+R_1r_{be}+R_2r_{be}}\approx r_{be}	
  \]
  The approximation is due to the fact that typically $r_{be}\ll R_1,\;R_2$.
\item {\bf AC Output Impedance:} 

  This is simply the resistance of the resistor 
  \[	R_{out}=R_C	\]

\item {\bf AC Amplification Gain:} 

  Given the AC input voltage $v_{in}$, the base voltage is (voltage divider):
  \[
  v_b=v_{in}\; \frac{(R_1||R_2||r_{be})}{(R_1||R_2||r_{be})+R_s}
  \approx v_{in}\;\frac{r_{be}}{r_{be}+R_s}	
  \]
  and the base current is
  \[
  i_b=\frac{v_b}{r_{be}}
  =v_{in}\;\frac{(R_1||R_2||r_{be})}{(R_1||R_2||r_{be})+R_s}\frac{1}{r_{be}}
  \approx v_{in}\frac{1}{r_{be}+R_s}
  \]
  The collector current is $i_c=\beta \;i_b$ and the output voltage is
  \[
  v_c=-i_c\;(R_C||R_L)=-\beta\;i_b\;(R_C||R_L)	
  \]
  Here the negative sign indicates the fact that $v_c$ is $180^\circ$ out of
  phase with $v_b$, as 
  \[	
  v_b \uparrow \Longrightarrow i_b \uparrow \Longrightarrow i_c \uparrow
  \Longrightarrow v_c \downarrow	
  \]
  The voltage gain is therefore
  \[
  A=\frac{v_{out}}{v_{in}}=\frac{v_c}{v_{in}}=
  -\beta \frac{(R_1||R_2||r_{be})}{(R_1||R_2||r_{be})+R_s}
  \frac{1}{r_{be}}(R_C||R_L)\approx -\beta\;\frac{R_C||R_L}{r_{be}+R_S}\]
  In particular, if the input resistance is much larger than the internal 
  resistance of the voltage source, i.e., 
  \[	
  R_{in}=R_1||R_2||r_{be} \approx r_{be} \gg  R_s	
  \]
  and the output resistance is much smaller than the load resistance, i.e.,
  \[
  R_{out}=R_C \ll R_L	
  \]
  then the gain can be approximated as
  \[
  A=\frac{v_{out}}{v_{in}}=-\beta \frac{R_C}{r_{be}}	
  \]
  Note that, as shown before, the resistance $r_{be}$ of the base-emitter 
  PN-junction is a function of $i_b$:
  \[
  r_{be}\approx \eta\frac{V_T}{I_B}
  \]
  which is inversely proportional to $I_B$. Higher values of $R_C$ and 
  $I_B$ (and therefore $I_C=\beta I_B$) may be desired to achieve higher
  voltage gain $A$. However, also note that distortion may also be caused 
  if $R_C$ or $I_B$ is set too high.
  
\end{itemize}

{\bf Example 1:} 

% \htmladdimg{../figures/transistorBJTexample1.gif}
\htmladdimg{../figures/DCACloadlineEx.gif}

Here $V_{CC}=12V$, $R_B=300\,k\Omega$, $R_C=R_L=4\,k\Omega$ ($R_S=0$), and the 
capacitances are large enough so that they can be considered as short circuit
for the AC signals. Assume $\beta=40$.

% \htmladdimg{../figures/transistorBJTexample1a.gif}
% \htmladdimg{../figures/transistorBJTexample1b.gif}

\begin{itemize}
\item Find base current:
  \[
  I_B=\frac{V_{CC}-V_{BE}}{R_B} \approx \frac{V_{CC}}{R_B}=\frac{12}{300\times 10^3}
  =40\times 10^{-6}\; A=40\;\mu A	
  \]

\item Find DC load line:

  The DC load line is determined by the following two points:
  $(I_C=0,\;V_{CE}=12V)$; and $V_{CE}=0$,
  \[
  I_C=\frac{V_{CC}}{R_C}=\frac{12\;V}{4\times 10^3\;\Omega}=3\times 10^{-3}A=3 \;mA	
  \]

\item Find DC operating point $Q$: 

  The DC operating point is at 
  \[
  I_C=\beta I_B=40\times 40\;\mu A=1.6\;mA,\;\;\;\;\;\;\;
  V_{CE}=V_{CC}-R_CI_C=12-4\times 1.6=5.6\;V
  \]

\item Find AC load line: 

  The AC load is $R'_L=R_C||R_L=2\;k\Omega$. The AC load line is a 
  straight line passing the DC operating point $Q$ with slope 
  $1/R'_L=1/2$. The intersections of the AC load line with $V_{CE}$
  and $I_C$ axes can be found by
  \[
  \frac{1.5}{V_{AC0}-6}=\frac{1}{2}\;\;\;\;\Longrightarrow V_{AC0}=8.8\,V
  \]
  \[
  \frac{I_{AC0}-1.5}{6}=\frac{1}{2}\;\;\;\;\Longrightarrow I_{AC0}=4.4\;mA 
  \]
\item Find input voltage and current:
  
  Assume AC input voltage is $v_{in}=20\;\sin\;\omega t\;mV$ and 
  $V_{BE}=0.6V$, the overall base voltage is
  \[
  v_{be}(t)=V_{BE}+v_{in}=(0.6+0.02\;\sin\;\omega t)\;V
  \]
  and the corresponding base current can be found graphically from the 
  input characteristics to be 
  \[
  i_b(t)=I_B+i_{in}=(40+20\;\sin\;\omega t)\;\mu A
  \] 
  between 20 and 60 $\mu A$. 
\item Fine $r_{be}$
  
  \[
  r_{be}=\frac{\Delta v_{be}}{\Delta i_b} =\frac{20\,mV}{20\,\mu A}=1\;k\Omega
  \]

\item Find AC output voltage: 

  The output current is
  \[
  i_c(t)=\beta\; i_b(t)=40\times(40+20\sin\omega t)\;\mu A
  =(1.6+ 0.8 \;\sin\omega t)\,mA
  \]
  The output voltage is
  \[ 
  v_c(t)=V_{AC0}-R'_L\;i_c(t)=8.8-2\times(1.6+0.8\;\sin\omega t)
  =(5.6-1.6 \;sin\;\omega t)\;V=v_{out}(t)
  \]

\item Find the AC voltage gain:
  \[
  A_v=\frac{|v_{out}|}{|v_{in}|}=\frac{1.6}{0.02}=80	
\]
\end{itemize}

\htmladdimg{../figures/DCACloadline.gif}
\htmladdimg{../figures/transistorBJTexample1c.gif}

The circuit above can also be analyzed using the small-signal model. 

% \htmladdimg{../figures/BJTexamplesmallsignal.gif}
\htmladdimg{../figures/DCACloadlineExModel.gif}

Same as before, $r_{be}=1 \,k\Omega$, and we have the following DC variables:
\[
I_B=(V_{CC}-V_{BE})/R_B \approx V_{CC}/R_B=40 \;\mu A	
\]
\[
I_C=\beta\;I_B=40\times 40\;\mu A=1.6\;mA	
\]
\[
V_{CE}=V_{CC}-R_C I_C=12-1.6\times 4=5.6\;V	
\]
% \[	r_{be}=V_T/I_B=26\;mV/40\mu A=650 \;\Omega	\]
The AC variables:
\[
i_b=v_{in}/r_{be}, \;\;\;\;v_c=-i_c\; R_C||R_L=-\beta\; i_b\; R'_L	
\]
The voltage gain is:
\[
A_v=\frac{v_c}{v_{in}}=-\frac{\beta\; i_b\;R'_L}{r_{be}\,i_b}
=-\frac{\beta\,R'_L}{r_{be}}=-\frac{(40\times 2)\;k\Omega}{1\;k\Omega}=-80	
\]
The input resistance is $R_{in}=R_B||r_{be}\approx r_{be}=1\,k\Omega$, the output 
resistance is $R_{out}=R_C=4\;k\Omega$.

\section*{Emitter Follower}

An emitter follower circuit shown in the figure is widely used in AC 
amplification circuits. The input and output of the emitter follower are
the base and the emitter, respectively, while the collector is at AC zero,
therefore this circuit is also called common-collector circuit.

\htmladdimg{../figures/emitterfollower.gif}

% Assume $\beta=50$, $R_B=300K\Omega$, $R_E=4K\Omega$, $R_S=500\Omega$, 
% $R_L=5.1K\Omega$, and $V_{CC}=12$.

Qualitatively, we can see the negative effect due to $R_E$:
\[
V_E\uparrow \Longrightarrow V_{BE} \downarrow \Longrightarrow I_B \downarrow
\Longrightarrow I_C \downarrow \Longrightarrow V_E\downarrow
\]

{\bf DC operating point}

\[ 
\left\{ \begin{array}{l} 
  I_E=(\beta+1) I_B	\\
  V_{CC}=R_B I_B+V_{BE}+R_E I_E=R_B I_B+V_{BE}+R_E (\beta+1)I_B	\\
  V_{CE}=V_{CC}-V_E=V_{CC}-R_E I_E \end{array} \right. 
\]
Solving the second equation, we get $I_B$:
\[
I_B=\frac{V_{CC}-V_{BE}}{(\beta+1)R_E+R_B} 
\]
and $I_E=(\beta+1)I_B$:
\[
I_E=(\beta+1) I_B=\frac{(\beta+1)(V_{CC}-V_{BE})}{(\beta+1)R_E+R_B} 
\]
\[
V_{CE}=V_{CC}-R_EI_E 
\]

{\bf Example}

Assume $R_B=100\,k\Omega$, $V_{CC}=10\,V$, $\beta=100$. Find $R_E$ so that the 
DC operating point is in the middle of the load line.

\[ 
V_E=I_E R_E=(\beta+1)I_B R_E=\frac{(\beta+1) R_E (V_{CC}-V_{BE})}{(\beta+1)R_E+R_B} 
\]
Solving the equation above for $R_E$ when $V_E=V_{CC}/2=5\,V$, we get 
$R_E=1.15\,k\Omega$.
\[
I_B=\frac{V_{CC}-V_{BE}}{R_B+(\beta+1)R_E}=0.043\,mA,
\;\;\;\;\;I_E=(\beta+1)I_B=4.34\,mA,\;\;\;\;V_E=5\,V
\]


{\bf AC small-signal equivalent circuit}

\htmladdimg{../figures/emitterfollower2.gif}

Based on this small signal model, we can find the three system parameters:
voltage gain, input resistance, and output resistance:

\begin{itemize}
\item {\bf Voltage gain:}

  Typically $R_B \gg r_{be}+R_E$ and therefore can be ignored, and have
  \[
  \left\{ \begin{array}{l} 
    v_{out}=v_e=i_e (R_E||R_L)=(\beta+1) i_b (R_E||R_L) 	\\
    v_{in}=i_b (R_S+r_{be})+v_{out}=i_b (R_S+r_{be})+(\beta+1) i_b (R_E||R_L)
  \end{array} \right. 
  \]
  The voltage gain can be found to be:
  \[
  A=\frac{v_{out}}{v_{in}}
  =\frac{(\beta+1) (R_E||R_L)}{(R_S+r_{be})+(\beta+1) (R_E||R_L)} \approx 1 
  \]
  As $R_S+r_{be} \ll (\beta+1) (R_E||R_L)$, the voltage gain $A$ is smaller 
  than but approximately equal to 1. Note that $A$ is positive, the otput
  voltage is in phase with the input voltage.

\item {\bf Input resistance:} 

  The input resistance $r_{in}$ is the parallel combination of $R_B$ and 
  $r'_{in}$, the resistance of the circuit to right of the base of the 
  transistor, including the load $R_L$, which can be found as the ratio 
  of the voltage $v_b$ and the current $i_b$. 
  \[
  v_b=i_b r_{be}+v_{out}=i_b\, [ r_{be}+(\beta+1)(R_E||R_L) ]
  \]
  therefore we get
  \[
  r'_{in}=\frac{v_b}{i_b}=r_{be}+(\beta+1) (R_E||R_L)
  \approx r_{be}+\beta (R_E||R_L)
  \]
  and 
  \[
  r_{in}=R_B||r'_{in} \approx r'_{in}\approx \beta (R_E||R_L)
  \]
  Comparing this with the input resistance of the common-emitter circuit
  $r_{in}=R_1||R_2|| r_{be} \approx r_{be}$, we see that the emitter follower 
  has much higher input resistance.

\item {\bf Output resistance:}

  The output resistance is the parallel combination of $R_E$ and the 
  resistance $r'_{out}$ of the circuit to the left of the emitter of the
  transistor (including $R_S$), which can  be found as the ratio of the 
  open-circuit voltage $v_{oc}$ (with $R_L=\infty$) and the short-circuit 
  current $i_{sc}$ (with $R_L=0$). As the voltage gain of the emitter 
  follower is close to unity, the open-circuit output voltage is 
  approximately the same as the source voltage $v_{oc}\approx v_{in}$. The
  short-circuit current $i_{sc}$ is
  \[
  i_{sc}=i_e=(\beta+1)i_b=(\beta+1)\frac{v_{in}}{r_{be}+R_S}
  \]
  Therefore we get
  \[
  r'_{out}=\frac{v_{oc}}{i_{sc}}=\frac{r_{be}+R_S}{\beta+1}
  \approx\frac{r_{be}+R_S}{\beta} 
  \]
  The overall output resistance can therefore be found to be
  \[
  r_{out}	= R_E || r'_{out}=R_E || \left(\frac{r_{be}+R_S}{\beta+1}\right)
  \approx \frac{r_{be}+R_S}{\beta}	
  \]
\end{itemize}

{\bf Conclusion:} 

The emitter follower is a circuit with deep negative feedback, i.e., 
100\% of its output $v_{out}=v_e$ is fed back to become part of its input 
$v_{be}$. The fact that this is a negative feedback can be seen by:
\[ 
v_e \uparrow \Longrightarrow v_{be} \downarrow
<\Longrightarrow i_e \downarrow \Longrightarrow v_e \downarrow 
\]
Due to this deep negative feedback, it has the following properties:
\begin{itemize}
\item The voltage gain is smaller than but very close to unity. 
\item The input resistance is large $r_{in}=\beta R_E||R_L$.
\item The output resistance is small $r_{out}=(r_{be}+R_S)/\beta$.
\end{itemize}

Although the emitter follower circuit does not amplify the signal voltage, 
it drastically improves the input and output resistances, compared with 
the input resistance $r_{in}=r_{be}$ and output resistances $r_{out}=R_C$ of 
the common-emitter transistor circuit. In fact the emitter follower acts 
as an impedance transformer with a ratio of $\beta$, i.e., the input 
resistance is $\beta$ times greater than $R_E||R_L$ and the output 
resistance is $\beta$ times smaller than $R_S+r_{be}$. 

Although the emitter follower does not amplify input voltage, due to its 
high input resistance and its low output resistance, it draws very little 
current from the source and can drive heavy load (low $R_L$), it is therefore
widely used as both the input and output stages for a multi-stage voltage 
amplification circuit.

\section*{Multi-stage Amplification}

In order to have an amplification gain, multi-stage amplification circuits
are needed. Such a circuit is typically composed of two or more cascaded
transistor amplifiers, coupled in one of three possible ways:
\begin{itemize}
\item Capacitor coupling:
\htmladdimg{../figures/coupling_capacitor.gif}
	\begin{itemize}
	\item Independent DC operating point;
	\item AC amplification of high gain if coupling capacitors are
		larger enough;
	\item Cannot amplify DC and low frequency signals;
	\item Difficult implementation on IC.
	\end{itemize}

\item Transformer coupling:
\htmladdimg{../figures/coupling_transformer.gif}
	\begin{itemize}
	\item Independent DC operating point;
	\item Can achieve maximal power by impedance match;
	\item Cannot amplify DC and low frequency signals;
	\item Difficult implementation on IC.
	\end{itemize}

\item Direct coupling:
\htmladdimg{../figures/coupling_direct.gif}
	\begin{itemize}
	\item DC operating point not independent;
	\item Can amplify both DC and AC signals;
	\item Easy implementation on IC.
	\end{itemize}

\end{itemize}


\section*{Typical Transistor Circuits}

\begin{itemize}

\item {\bf Differential Amplifier}

Differential amplifier can amplify a small difference $\triangle v=v_1-v_2$ 
between two voltages $v_1$ and $v_2$. Differential amplification has many 
applications, such as the first stage of operational amplifiers (Op-amps).

Assume the two transistors $T_1$ and $T_2$ in the circuit are identical with
the same properties, and their emitters are connected to a current source
with constant current so that $I_E=I_1+I_2$, i.e., if $I_1$ increases, $I_2$
will decrease, and vice versa. Consider the following three cases:
\begin{itemize}
\item When the two input voltages are the same $v_1=v_2$, i.e., $\Delta V=v_1-v_2=0$,
  then $I_1=I_2=I_E/2$ and the output voltage is $V_{out}=V_{CC}-I_2 R_C$, which
  is treated as a reference level corresponding to $\Delta V=0$.
\item If $v_1>v_2$, the following changes take place:
  \[ v_1 \uparrow \Longrightarrow I_1 \uparrow \Longrightarrow I_2 
  \downarrow \Longrightarrow v_{out}=V_{CC}-I_2 R_c \uparrow \]
\item If $v_1<v_2$, the following changes take place:
  \[ v_1 \downarrow \Longrightarrow I_1 \downarrow \Longrightarrow I_2 
  \uparrow \Longrightarrow v_{out}=V_{CC}-I_2 R_c \downarrow \]
\end{itemize}
The output voltage $V_{out}$ can be further amplified to indicate the 
difference and its polarity between the two input voltages $v_1$ and $v_2$.

The current source shared by the two transistors is also shown in the 
figure. Due to the fact that the forward biased diodes have fixed voltage
$V_D=0.7V$, the base voltage of the transistor is also fixed at $2.1V$, so
is the current $I_{ce}$, i.e., the circuit can be used as a constant current
source. A Zener diode can also be used to replace the diodes to keep the base
voltage of the transistor of the current source constant.

\htmladdimg{../figures/differential_amplify.gif}

\item {\bf Oscillators}

  An oscillator is a circuit used to generate sinusoidal signals of a desired 
  frequency. Many such circuits are based on the LC parallel resonance with the
  frequency $\omega_0=1/\sqrt{LC}$. In addition to the LC circuit, an amplification
  circuit with positive feed back is also needed to prevent the attenuation of the 
  oscillation (initially triggered by switching on the circuit) due to the inevitable 
  resistance in the circuit. 

  The parallel LC circuit can also be considered as a collector impedance $Z_c$
  which is maximized at the resonant frequency, thereby the voltage gain of this
  circuit is also maximized.

  The Hartley and Colpitts oscillators are two typical
  circuits. In both cases, a transistor amplifier is used to receive positive 
  feedback taken from the the LC circuit. 

  \begin{itemize}
  \item \htmladdnormallink{Hartley Oscillator}{http://www.learnabout-electronics.org/Oscillators/osc21.php}
    The feedback signal is taken from the $L$ branch between $L_1$ and $L_2$ in series.
    The resonant frequency is $\omega_0=1/\sqrt{C(L_1+L_2)}$.

    \htmladdimg{../figures/Hartley.png}
  \item \htmladdnormallink{Colpitts Oscillator}{http://www.learnabout-electronics.org/Oscillators/osc23.php}
    The feedback signal is taken from the $C$ branch between $C_1$ and $C_2$ in series.
    The resonant frequency is $\omega_0=1/\sqrt{LC_1C_2/(C_1+C_2)}$.

    \htmladdimg{../figures/Colpitts.png}
  \end{itemize}
  In both circuits, the feedback is a fraction of part of the output $v_c=v_{out}$
  \[
  v_{feedback}=v_c\frac{Z_{L_2}}{Z_{L_1}+{Z_{L_2}}}=v_c\frac{L_2}{L_1+L_2},\;\;\;\;\;\;
  v_{feedback}=v_c\frac{Z_{C_2}}{Z_{C_2}+{Z_{C_3}}}=v_c\frac{C_3}{C_2+C_3}
  \]
  and it is then sent to the emitter of the transistor, which is in phase with the 
  collector connected to the LC circuit, i.e., the feedback is indeed positive:
  \[
  v_c\uparrow \Longrightarrow v_{feedback} \uparrow \Longrightarrow 
  v_b\uparrow \Longrightarrow v_{be} \downarrow \Longrightarrow v_c\uparrow
  \]


\item \htmladdnormallink{{\bf Different types of amplification circuits}}{http://en.wikipedia.org/wiki/Amplifier}

%\htmladdnormallink{Push-pull circuit}{http://www.ecircuitcenter.com/circuits/pushpull/pushpull.htm}


\item {\bf Frequency Mixer}

When a transistor is used for amplification, its DC operating point is typically
set in the middle of the load line to maximize the linear dynamic range. By so
doing, the signal distortion will be minimized by avoiding the nonlinear region
of the transistor circuit.

However, in some applications, the nonlinear behavior of the transistor circuit 
is taken advantage of, such as in a {\em frequency mixer}. Assume the input voltage
to a transistor circuit contains two frequency components:
\[
V_{BE}(t)=\cos\omega_1t+\cos\omega_2t 
\]
As discussed previously, the output current is
\[
I_B=I_o\, (e^{V_{BE}/V_T}-1),\;\;\;\;\;
I_C=\beta I_B=\beta\, I_o\, (e^{V_{BE}/V_T}-1) 
\]
We now consider the nonlinear effect of the circuit on the input containing two
frequency components. In general an exponential function can be approximated as:
\[
e^x=\sum_{k=0}^\infty \frac{x^k}{k!},\;\;\;\;\;\mbox{i.e.}\;\;\;\;\;
e^x-1 \approx x+\frac{1}{2} x^2 
\]
\begin{eqnarray} 
I_B &\propto& (\cos\omega_1t+\cos\omega_2t) +\frac{1}{2}(\cos\omega_1t+\cos\omega_2t)^2 
\nonumber \\
&=&\cos\omega_1t+\cos\omega_2t+\cos^2\omega_1t/2+\cos\omega_1t\;\cos\omega_2t +\cos^2\omega_2t/2  
\nonumber
\end{eqnarray}
But as 
\[ 
\cos^2\alpha=\frac{1+\cos 2\alpha}{2},\;\;\;\;\;
\cos\alpha\;\cos\beta=\frac{\cos(\alpha+\beta)+\cos(\alpha-\beta)}{2} 
\]
we see that $I_B$, as well as the output current $I_C=\beta I_B$, contains
many new frequency components in addition to the two original frequencies
$\omega_1$ and $\omega_2$, including $\omega_1+\omega_2$, $\omega_1-\omega_2$,
$2\omega_1$, and $2\omega_2$. This transistor circuit is therefore called a 
frequency mixer. By properly filtering in the circuit following this mixer, 
one of such frequencies, such as the difference frequency $\omega_1-\omega_2$ 
(the ``beat frequency'') can be amplified for some purpose such as in a 
super-heterodyne receiver, while all other frequency components are suppressed.

Note that the specific nonlinear behavior of the circuit is not important, as the
Taylor series expansion of any nonlinear function will contain constant, first 
and second order terms as the exponential function assumed above, and the same
frequency components will result.

\end{itemize}

\section*{Metal-Oxide-Semiconductor Field-Effect Transistors}

A metal-oxide-semiconductor field-effect transistor (MOSFET) has three terminals,
source, gate, and drain. In an n-MOSFET (or p-MOSFET), both the source S and drain
D are N-type (or P-type) and the substrate between them is P-type (or N-type). 
The gate and the P-type substrate is insulated by a thin layer of $SiO_2$. Due 
to this insulation, there is no gate current to either the source or drain.

\htmladdimg{../figures/MOS_FET_transistors.gif}
\htmladdimg{../figures/MOSFET4.gif}

\htmladdimg{../figures/MOSFET.gif}

%{\bf Different types of MOSFET}
%\htmladdimg{../figures/MOSFET2.gif}


The n-MOSFET can be considered as a voltage-controlled switch. When sufficient
voltage $V_{GS}$ is applied between gate and source, the positive potential at 
the gate will induce enough electrons from the P-type substrate (minority 
carriers) to form an electronic channel called an {\em inversion layer} between
source and drain, and a current $I_{DS}$ between source and drain is formed. 
Qualitatively the conductivity between source and drain of an n-channel field 
effect transistor can be described as:

\[ 
\left\{ \begin{array}{l}
  V_{GS} \uparrow \Longrightarrow I_{DS} \uparrow \Longrightarrow \mbox{conducting} \\
  V_{GS} \downarrow \Longrightarrow I_{DS} \downarrow \Longrightarrow \mbox{cut off} 
\end{array} \right. 	
\]

\htmladdimg{../figures/MOSFET3.gif}

More accurately, the behavior of an n-channel MOSFET can be described by the 
function $I_{DS}=f(V_{GS}, V_{DS})$ with a threshold voltage $V_T$, as plotted 
below:

\htmladdimg{../figures/MOSFETplots.gif}

%\htmladdimg{../figures/MOSFETplot1.gif}

This function can be divided into three different (piece-wise linear) regions:

\begin{itemize}
  \item {\bf Cutoff region:} When $V_{GS}<V_T$, no current flows through S and D,
    due to the two PN-junctions, i.e. $I_{DS}=0$, independent of $V_{DS}$. This
    is illustrated in part (b) of the figure above.

  \item {\bf Triode region:} When $V_{GS}>V_T$ and $V_{DS}<V_{GS}-V_T$ (i.e., 
    $V_{GS}-V_{DS}>V_T$ or $V_{GS}>V_{DS}+V_T$), some electrons in the P-type 
    substrate (minority carriers) are pulled toward the gate to form an 
    inversion layer close to the gate to form an N-type channel with certain 
    resistance between S and D. 

    The current $I_{DS}$ increases linearly as $V_{DS}$ increases, with a coefficient 
    $r_{on}=\Delta V_{DS}/\Delta I_{DS}$ (Ohm's law), and also nonlinearly as $V_{GS}$ 
    increases (to pull more electrons toward the gate to enhance the conductivity 
    of the n-channel).

  \item {\bf Saturation region:} When $V_{GS}>V_T$ but $V_{DS}$ increases further,
    the voltage between gate and e-channel close to the drain $V_{GD}=V_{GS}-V_{DS}$ 
    becomes small and the e-channel close to the drain narrows. In particular,
    when $V_{DS}>V_{GS}-V_T$ i.e., $V_{GS}<V_{DS}+V_T$, the voltage between gate and 
    drain is:
    \[ V_{GD}=V_{GS}-V_{DS}<V_{GS}-(V_{GS}-V_T)=V_T \]
    In this case, the e-channel at the D end is nearly closed ({\em pinch-off}), 
    $I_{DS}$ is saturated and maintains at a constant value independent of $V_{DS}$ 
    (as higher $V_{DS}$ tends to draw more electrons toward the drain on the one
    hand but also enhance the pinch-off effect on the other). Now $I_{DS}$ is only 
    affected by $V_{GS}$, i.e., the transistor behaves like a voltage 
    controlled-current source, as illustrated in part (c) of the figure above.
 \end{itemize}

 In summary, the current $I_{DS}$ is controlled by both voltages $V_{GS}$ and
 $V_{DS}$, as shown in the plots above. Specifically, in the saturation region
 where $V_{DS}>V_{GS}-V_T$, the current $I_{DS}$ is related to $V_{GS}$ by:
 \[ I_{DS}=\left\{ \begin{array}{ll}
   K(V_{GS}-V_T)^2 & \mbox{if $V_{GS}\ge V_T$ and $V_{DS}\ge V_{GS}-V_T$} \\
     0 & \mbox{if $V_{GS}<V_T$} \end{array} \right. \]

 The triode region and the saturation region is separated by the curve 
 $V_{DS}=V_{GS}-V_T$. In terms of the current from drain
 to source, this curve can also be represented by $I_{DS}=K(V_{GS}-V_T)^2=KV_{DS}^2$.

 {\bf Example 1:} Assume $V_T=1V$.
 \begin{itemize}
 \item when $V_{GS}<V_T=1V$, the MOSFET is in cutoff region with $I_{DS}=0$ independent
   of $V_{DS}$.
 \item when $V_{GS}=2V > V_T=1V$ and $V_{DS}<V_{GS}-V_T=1V$, the MOSFET is in linear or 
   triode region with $I_{DS}$ affected by both $V_{GS}$ and $V_{DS}$.
 \item when $V_{DS}>V_{GS}-V_T=1V$, the MOSFET is in saturation region with $I_{DS}$
   determined only by $V_{GS}$.
 \end{itemize}

 {\bf Example 2:} Assume $K=2 mA/V^2$ and $V_T=1V$, and both MOSFETs in the following 
 circuit are in the saturation region. Find output voltage $V$.

 \htmladdimg{../figures/MOSFETexample1.gif}

 Since both MOSFETs are in saturation region with the same $I_{DS}$ which is determined
 only by $V_{GS}$ but independent of $V_{DS}$, their $V_{GS}$ must be the same. The 
 upper MOSFET must have the same $V_{GS}$ as the lower one $V_{GS}=2V$, i.e., the 
 output voltage has to be $3V$.

 {\bf Comparison between BJT and FET}

 \begin{itemize}
 \item BJT has a low input resistance $r_{in}$. But as MOSFET's gate is
   insulated from the channel ($r_{in}>10^{11} \Omega$), it draws virtually
   no input current and therefore its input resistance is infinity in theory.
 \item BJT is current ($I_B$ or $I_E$) controlled, but MOSFET is voltage 
   ($V_{GS}$) controlled. Consequently, the power consumption of MOSFETs 
   is lower than BJTs.
 \item MOSFETs are easy to fabricate in large scale and have higher element
   density than BJTs.
 \item MOSFETs have thin insulation layer which is more prone to statics
   and requires special protection. 
 \item BJTs have higher cutoff frequency and higher maximum current than 
   MOSFETs.
 \item MOSFETs are much more widely used (especially in computers and 
   digital systems) than BJTs.
 \item Both majority and minority carriers are used in BJTs, but only 
   majority carriers are used in FETs. Consequently FETs have better
   temperature stability (minority carriers are more sensitive to
   temperature).

 \end{itemize}

The BJT and FET can be compared with the old technology of 
\htmladdnormallink{vacuum tube}{http://en.wikipedia.org/wiki/Vacuum_tube}.
Although the specific physics of each of these devices is quite different 
from others, the working principles of these devices are essentially the 
same. In all three devices, a small AC input voltage (signal) is applied
to the input terminal of the device (base, gate, or grid) to control the
current that flows through the device (from collector, drain, or plate to 
emitter, source, or cathode, respectively), causing a much amplified voltage
to appear at the output terminal (collector, drain, or plate) of the device.


\section{MOSFET Amplifier}

 \htmladdimg{../figures/MOSFETamplifier.gif}
 \htmladdimg{../figures/MOSFETtransfer.gif}

Assume in the circuit above $V_{in}=V_{GS}>V_T$ and the transistor is in 
saturation region, i.e., $V_{DS}>V_{in}-V_T$, then we have 
\[ \left\{ \begin{array}{l}
I_{DS}=K(V_{in}-V_T)^2 \\
V_{out}=V_{DS}=V_{dd}-I_{DS} R=V_{dd}-KR(V_{in}-V_T)^2  \end{array} \right.
\]
The second equation relates the output $V_{out}$ to the input $V_{in}$, as
shown by the red segment of the curve in the plot above. As the transistor is 
in saturation region,
\[ V_{out}=V_{dd}-KR(V_{in}-V_T)^2\ge V_{in}-V_T \]
which can be solved for $V_{in}$ to get:
\[ V_{in}<\frac{-1+\sqrt{1+4KRV_{dd}}}{2KR}+V_T \]
It can be seen that when the transistor is in saturation mode the slope of 
the curve (red) indicates the ratio between input $V_{in}$ and output $V_{out}$.
And the voltage gain of the circuit is defined as:
\[ g=\frac{d V_{out}}{d V_{in}}=\frac{d}{d V_{in}}(V_{dd}-K(V_{in}-V_T)^2 R)
  =-2KR(V_{in}-V_T) \]

{\bf Example:} Assume $V_{dd}=10V$, $R=10 k\Omega$, $K=0.5\;mA/V^2$, $V_T=1V$.
For the transistor to be in saturation region, we need
\begin{itemize}
\item $V_{in}>V_T=1\;V$ 
\item $V_{in}<[-1+\sqrt{1+4KRV_{dd}}\;]/2KR+V_T=2.32\;V $
\end{itemize}
then we have
\[ V_{out}=V_{dd}-K(V_{in}-V_T)^2 R=10-5(V_{in}-1)^2 \]
and the voltage gain is a function of the input $V_{in}$:
\[ g(V_{in})=\frac{d}{d\,V_{in}} V_{out}(V_{in})=-10(V_{in}-1) \]
This nonlinear equation can be represented by the table below:
\begin{tabular}{l | lllllllllllll} 
$V_{in} $ & 0  & 1  & 1.4 & 1.5 & 1.8 & 1.9 & 2.0 & 2.1 & 2.2 & 2.3 & 2.32 & 2.35 & 2.4 \\ \hline
$V_{out}$ & 10 & 10 & 9.2 & 8.8 & 6.8 & 6.0 & 5.0 & 4.0 & 2.8 & 1.6 & 1.3  & 0.9  & 0.0 
\end{tabular}
In particular, when the input $V_{in}$ increases from $1.8V$ to $1.9V$, the output 
$V_{out}$ decreases from $6.8V$ to $6V$, with a gain $g(V_{in})=g(1.8)=-10(1.8-1)=-8$.
Also when the input $V_{in}$ increases from $2.0V$ to $2.1V$, the output $V_{out}$ 
decreases from $5V$ to $4V$, with a gain $g(V_{in})=g(2)=-10(2-1)=-10$. 

 \htmladdimg{../figures/MOSFETexample.gif}

In summary, we see that
\begin{itemize}
\item When the transistor is in saturation mode, the circuit behaves as a voltage amplifier.
\item The voltage gain is the slope of the tangent of the curve (red) as a function of $V_{in}$.
\item The value of the gain depends on the level of input $V_{in}$. When 
  $V_T=1V<V_{in}<2.32V$, the gain $|g|>1$ is greater than one.
\item The output voltage is $180^\circ$ out of phase with the input voltage ($g<0$),
  as the slope of $V_{out}(V_{in})$ is negative.
\item When $V_{in}<V_T=1V$, the transistor is cutoff.  On the other hand, when 
  $V_{in}>2.32V$, $V_{out}$ is more than one $V_T$ below $V_{in}$, for example, 
  $V_{in}=2.32$, $V_{out}=1.3<V_{in}-V_T=2.32-1=1.32$, the transistor is in triode
  region. In either of the two cases, the transistor has no amplification capability.
\end{itemize}

Next we consider a MOSFET circuit with sinusoidal input. Assume the drain resistor
is $R=10\;k\Omega$, $K=1\;mA/V^2$, $V_T=1V$, $V_{dd}=5V$ and a sinusoidal input 
$v_{in}(t)=V_{bias}+\sin(\omega t)$. If the bias voltage is $V_{bias}=1.5V$, the
input voltage $v_{in}(t)$ varies between 1.4V and 1.6V. The output voltage can be
found to be:
\[ v_{out}=V_{dd}-RI_{DS}=V_{dd}-RK(V_{in}-V_T)^2=5-10 (V_{in}-1)^2 \]
In particular, corresponding to $V_{in}=1.4V,\;1.5V,\;1.6V$, the output voltage 
$v_{out}$ and the current $i_{DS}$ are, respectively, $v_{out}=3.4V,\;2.5V,\;1.4V$, 
and $i_{DS}=0.16mA,\;0.25mA,\;0.36mA$, as shown in the figure below:

\htmladdimg{../figures/MOSFETloadline.gif}

{\bf Biasing:} In the example above, the DC offset of the input is at 1.5V, so that
the transistor is working in the saturation region when the magnitude of the AC input
is limited. However, if this offset is either too high or too low, the gate voltage
may go beyond the saturation region to enter either the triode or the cutoff region.
In either case, the output voltage will be severely distorted, as shown below:

\htmladdimg{../figures/MOSFETregions.gif}

It is therefore clear that the DC offset or biasing gate voltage has to be properly
setup to make sure the dynamic range of the input signal is within the saturation 
region. 

{\bf Method 1:} One way to provide the desired DC offset is to use two resistors 
$R_1$ and $R_2$ that form a voltage divider, as shown in the figure below (a). As 
the input resistance of a MOSFET transistor is very high, therefore the gate of 
the transistor does not draw any current, the DC offset voltage can simply obtained
as:
\[ V_{bias}=V_{dd}\frac{R_1}{R_1+R_2} \]
The input AC signal through the input capacitor is then superimposed on this DC 
offset. 

\htmladdimg{../figures/MOSFETbiasing.gif}

{\bf Method 2: } Another way to set up the bias is the circuit shown in (b) above.
Assume $R_1=84k$, $R_2=16k$, $R_d=20k$, $V_{dd}=10V$, and $K=0.5mA/V^2$.  The bias 
voltage can be found to be $V_B=V_{bias}=1.6V$, and the voltage between gate and 
source is $V_{GS}=V_B-V_{in}$. The output voltage is
\[ V_{out}=V_{dd}-R_d K (V_{GS}-V_T)^2=V_{dd}-R_d K (V_B-V_{in}-V_T)^2=10-10\times 
(0.6-V_{in})^2  \]
When $V_{in}=0$, $V_{out}=6.4V$.

To determine the dynamic range of the input $V_{in}$, recall the conditions for the
transistor to be in saturation region:
\begin{itemize}
\item To avoid cutoff region: $V_{GS}-V_T \ge 0$. For this particular circuit, 
  \[ V_{GS}-V_T=V_B-V_{in}-V_T=0.6-V_{in} \ge 0 \]
  Solving this we get $V_{in} \le 0.6V$ with corresponding output $V_{out} < 10V$.

\item To avoid triode region: $V_{DS} \ge V_{GS}-V_T$. For this particular circuit, 
%\[  V_{DS}=V_{out}-V_{in} \ge V_B-V_{in}-V_T \]
\[  V_{DS}=V_{out}-V_{in}=(V_{dd}-R_dI_{DS})-V_{in}
    =V_{dd}-R_dK (V_B-V_{in}-V_T)^2-V_{in} \ge V_B-V_{in}-V_T  \]
that is
\[  V_{out}=V_{dd}-R_dK (V_B-V_{in}-V_T)^2 \ge V_B-V_T \]
i.e.,
\[  V_{out}=10-10\times (0.6-V_{in})^2 \ge 0.6 \]
Solving this for $V_{in}$ we get $V_{in} \ge -0.37V $, with corresponding output
$V_{out} \ge 0.6V$
\end{itemize}
Therefore the overall dynamic range for the input is 
\[ -0.37V \le V_{in} \le 0.6V \]
with the corresponding output range
\[  0.6V \le V_{out} \le 10V  \]
and the overall voltage gain is about $g=9.7$. Note that the output voltage is in
phase with the input voltage.

{\bf Source Follower: } If the output is taken from the source, instead of the 
drain of the transistor, the circuit is called a source follower. 

\htmladdimg{../figures/MOSFETfollower.gif}

Assume $R_S=10 k\Omega$, $V_T=1V$ and $K=10 mA/V^2$. To find the input and output 
voltages and the gain of the circuit, consider the current $I_{DS}=V_{out}/R_S$:

\[ I_{DS}=K(V_{GS}-V_T)^2=K(V_{in}-V_{out}-V_T)^2=V_{out}/R_S \]
Plugging in the given values, we get
\[ (V_{in}-V_{out}-1)^2=V_{out} \]
If $V_{in}=2V$, this equation becomes:
\[ (V_{out}-1)^2=V_{out} \]
which can be solved to get $V_{out}=2.6V$ or $V_{out}=0.4V$. We take the smaller 
voltage in order for the transistor to be outside the cutoff region:
\[ V_{GS}=V_{in}-V_{out}=2-V_{out}>V_T=1 \]
Similarly, if $V_{in}=3V$, the equation becomes:
\[ (V_{out}-2)^2=V_{out} \]
and we get $V_{out}=1V$. The voltage gain of the source follower is 
\[ g=\frac{\Delta V_{out}}{\Delta V_{in}}=\frac{1-0.4}{3-2}=0.6<1 \]

To maximize the dynamic range for the input AC signal, the DC operation point
in terms of the DC variables $\{V_{GS}, I_{DS}, V_{DS}\}$ needs to be set around
the middle point of the saturation region. If the AC signal around the DC 
operation point is small enough, the behavior of the circuit can be linearized
(first term of Taylor expansion of the nonlinear relationship) to simplify the
analysis. 

\htmladdimg{../figures/MOSFETsmallsignal.gif}

Specifically, the nonlinear relationship between $V_{GS}$ and $I_{DS}$ can 
be linearized around the DC operation point for small changes:
\[ g_m=\frac{\Delta I_{DS}}{\Delta V_{GS}} \]
Here $g_m$, called incremental transconductance, is the ratio between small 
change in $I_{DS}$ and the small change in $V_{GS}$.

\section{CMOS Digital Logic Circuits}

Either a p-channel MOSFET (pMOS or PFET) or an n-channel MOSFET (nMOS or NFET)
can be treated as a switch between its drain $D$ and source $S$ controlled by
the voltage $V_{gs}$ between gate $G$ and source $S$. When $V_{gs}>V_{Tn}$ 
(e.g.,  $V_{Tn}=1\;V$) for nMOS and $V_{gs}\le V_{Tp}$ (e.g.,  $V_{Tp}=-1\;V$)
for pMOS, the circuit is a short-circuit because of the low resistance between 
$D$ and $S$; otherwise, the circuit is an open-circuit due to the large 
resistance between $D$ and $S$. A circuit composed of both types of MOSFET 
transistors is called a complementary MOS or CMOS circuit, which is widely
used in digital systems.

When two switches are connected in series, the resulting circuit conducts 
only if both switches conduct, i.e., the circuit implements logic AND. On 
the other hand, when two switches are connected in parallel, the resulting 
circuit conducts if either of the two switches conducts, i.e., the circuit 
implements logic OR.

Due to such logic properties of the series and parallel connections of the
pMOS and nMOS transistors, various logic circuits can be constructed to 
realize a given logic function $f(a,b,\cdots,x)$, where each of the inputs
$a,b,\cdots,x$ is either a low or high a voltage, representing, respectively,
logic value 0 or 1. Corresponding to each possible combination of the inputs,
the output is either low or high in voltage for logic 0 or 1.

In general, a logic function $f(a,b,\cdots,x)$ is realized by two complementary
circuits, one pull-up circuit connected to the voltage source $V_s$, and a 
pull-down circuit connected to ground, as shown in the figure:

\htmladdimg{../figures/CMOSlogic.gif}

When the input variables $a,b,\cdots,x$ are such that the pull-up circuit is
conducting (short-circuit) and the complementary pull-down circuit is cutoff 
(open-circuit), the output $f$ is connected to the voltage source to output a 
high voltage representing logic 1; however, when the input variables $a,b,\cdots,x$ 
are such that the pull-up circuit is cutoff (open) and the complementary pull-down
circuit is conducting (short), the output $f$ is connected to ground to output
a low voltage representing logic 0.

Before discussing the implementation of the pull-up and pull-down circuits,
recall the famous De Morgan's Law:
\[ (A+B+C)'=A'\cdot B'\cdot C',\;\;\;\;\;\;\;\;(A\cdot B\cdot C)'=A'+B'+C' \]
Here $A'$ is the negation of variable $A$. In general, the De Morgan's law 
states that the negation (complementary) of a given function can be found 
by negating the logical operations (turn AND to OR and OR to AND) as well as 
the variables in a function. 

As the simplest example, the NOT gate is implemented by a pull-up circuit
composed of only a pMOS transistor and its complementary pull-down circuit
composed of only a nMOS transistor, as shown below:

\htmladdimg{../figures/CMOSnot.gif}

\begin{itemize}
\item {\bf Logic NAND}

The pull-up function is $V'_1+V'_2=(V_1\;V_2)'$, and the pull-down function 
is $V_1\;V_2$, which is indeed the negation of the pull-up function, i.e., 
the output function $V_{out}=f(V_1,V_2)=V'_1+V'_2=(V_1 V_2)'$ is the same 
as the pull-up function, a negation of AND, or NAND.

\item {\bf Logic NOR}

The pull-up function of the circuit on the right is $V'_1\;V'_2=(V_1+V_2)'$,
and the pull-down function is $V_1+V_2$, the negation of the pull-up function.
The output is the same as the pull-up function $V_{out}=(V_1+V_2)'$, negation
of OR, or NOR.
\end{itemize}

\[ \begin{tabular}{cc||c|c|c|c} \\ \hline 
  &       &  AND & OR & NAND         &   NOR        \\ \hline
$V_1$ 	& $V_2$ & $V_1\,V_2$ & $V_1+V_2$ &  $(V_1\; V_2)'$ & $(V_1+V_2)'$ \\ \hline \hline
  0 	& 0 	& 0 & 0 & 1		 & 1            \\
  0 	& 1 	& 0 & 1 & 1		 & 0            \\
  1 	& 0 	& 0 & 1 & 1		 & 0            \\
  1 	& 1 	& 1 & 1 & 0		 & 0            \\ \hline
\end{tabular} \]

\htmladdimg{../figures/CMOSnandnor.gif}

More complicated logic functions can be similarly implemented using CMOS
circuits.

{\bf Example:} Implement logic function $f(a,b,c)=(a'+b')c$ by a CMOS circuit.

First, find the complementary function $f'(a,b,c)$:
\[ f'(a,b,c)=(a'+b')'+c'=ab+c' \]
and then the CMOS circuit can be designed as shown:
\htmladdimg{../figures/CMOSlogicexample.gif}





\end{document}


	

	












\item {\bf JFET}

A junction-gate field-effect transistor (JFET) has three terminals, the 
source, gate and drain (corresponding to the emitter, base and collector 
of a BJT). In a JFET, the source and drain is connected by a conducting 
channel (N- or P-doped), which is insulated by reverse biased PN-junctions 
(the P- or N-type substrate and gate) . The current flowing through the
channel is due to the voltage $V_{DS}$ applied across drain and source, 
and controlled by the voltage $V_{GS}$ applied to the gate. In the following,
we only consider n-channel FETs.

%\htmladdimg{../figures/JFET.gif}

The drain-source current $I_D$ is affected by two voltages $V_{GS}$
and $V_{GS}$. 
\begin{itemize}
\item When $V_{GS}$ is fixed (e.g., $V_{GS}=0$) and $V_{DS}$ is small
	and positive ($V_D>V_S$), the conducting channel behaves like a
	resistor and $I_D$ increases linearly with $V_{DS}$.
\item As $V_{DS}$ continues to increase, the PN-junction close to the 
	drain is highly reverse biased and the depletion region widens
	and the channel narrows, until eventually the channel is pinched 
	off at $V_{GS}=V_P$ and $I_D$ no longer increases with $V_{DS}$ 
	to reach saturation.
\item After pinch-off point, $I_D$ is controlled by $V_{GS}$, which
	determines how much the PN-junction between the gate and the 
	channel is reverse biased and thereby the width of the channel.
\end{itemize}

This is the transfer characteristics:
%\htmladdimg{../figures/JFETplot1.gif}

This is the output characteristics:
%\htmladdimg{../figures/JFETplot2.gif}

As the PN-junction between G and S has to be reverse biased all the time, 
i.e., $V_{GS}<0$. 


\section{Small Signal Model}

Similar to BJT, an FET can also represented by a small-signal model. As
$i_G=0$, the model for FET is simpler than BJT. The model for common-source
configuration is
\[	i_g=0	\]
and
\[	i_d=f(v_{gs}, v_{ds})=\frac{\partial i_d}{\partial v_{gs}} v_{gs}
	+\frac{\partial i_d}{\partial v_{ds}} v_{ds}
	=g_m v_{gs}+v_{ds}/r_{ds}
\]
where $g_m=\partial i_d/\partial v_{gs}$ is the transfer admittance
representing how input voltage $v_{gs}$ effects the current $i_{ds}$,
$r_{ds}=\partial v_{ds}/\partial i_d$ is the output resistance (reciprocal 
of the slope of the i-v curve in the output characteristics), representing
how $v_{ds}$ effects $I_D$. As $r_{ds}$ is large, it can be omitted to 
simplify the model to 
\[	i_{ds}=g_m v_{gs}	\]

\htmladdimg{../figures/smallsignalmodelFET.gif}


{\bf Biasing}

Similar to BJT, FET can also used as common-source, common-gate or
common-drain circuit. The common-source configuration is most typical
and there are two different biasing methods to set up the DC operating
point:
\begin{itemize}
\item {\bf Self-Biasing}

\htmladdimg{../figures/JFETbiasing1.gif}
\[	V_{GS}=-I_D R	\]
\item {\bf Voltage Divider Biasing}

\htmladdimg{../figures/JFETbiasing2.gif}
\[	V_{GS}=\frac{R_{g2}}{R_{g1}+R_{g2}} \;V_{DD}-I_D R \]
\end{itemize}
Also, common to both biasing methods, we have
\[	V_{DS}=V_{DD}-I_D(R+R_d)	\]
and from the transfer characteristics:
\[	I_D=I_{DSS}(1-V_{GS}/V_P)^2	\]
These three equations can be solved for $V_{GS}$, $V_D$ and $V_{DS}$
for the DC operating point. 


The equivalent AC resistance between base and emitter $r_{be}$ can be found 
as below. Assume small signal $(v_B(t), i_B(t))$ around the DC operating point 
$(V_B, I_B)$, the base voltage is $V_B+v_B(t)$ and the base current is
\begin{eqnarray}
  I_B+i_B(t)&=& I_0 [e^{(V_B+v_B(t))/V_T}-1]\approx I_0 e^{(V_B+v_B(t))/V_T}
  =I_0 e^{V_B/V_T} e^{v_B(t)/V_T}
  \nonumber \\
  &=& I_B e^{v_B(t)/V_T} \approx I_B(1+\frac{v_B(t)}{V_T})
  \nonumber	
\end{eqnarray}
The first approximation is due to the fact that the exponential term is much
greater than 1 if $V_B$ is about 0.7V ($V_T=26\;mV$ in room temperature). The
second approximation is due to the expansion $e^x=1+x+x^2/2!+x^3/3!+\cdots $.

 and 
\[	i_B(t)=I_B \frac{v_B(t)}{V_T}	\]
Then we get
\[	r_{be}=\frac{v_B(t)}{i_B(t)}=\frac{V_T}{I_B}	\]
